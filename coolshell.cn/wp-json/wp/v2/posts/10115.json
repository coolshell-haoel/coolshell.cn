{"id":10115,"date":"2013-07-21T21:16:33","date_gmt":"2013-07-21T13:16:33","guid":{"rendered":"http:\/\/coolshell.cn\/?p=10115"},"modified":"2013-07-21T23:35:51","modified_gmt":"2013-07-21T15:35:51","slug":"c%e8%af%ad%e8%a8%80%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f%e9%82%a3%e4%ba%9b%e4%ba%8b%e5%84%bf","status":"publish","type":"post","link":"https:\/\/coolshell.cn\/articles\/10115.html","title":{"rendered":"C\u8bed\u8a00\u5168\u5c40\u53d8\u91cf\u90a3\u4e9b\u4e8b\u513f"},"content":{"rendered":"<p><strong>\uff08\u611f\u8c22\u7f51\u53cb\u00a0<\/strong><a href=\"http:\/\/weibo.com\/fullofbull\" target=\"_blank\"><strong>@\u6211\u7684\u4e0a\u94fa\u53eb\u8def\u9065<\/strong><\/a><strong>\u00a0\u6295\u7a3f\uff09<\/strong><\/p>\n<p>\u4f5c\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\uff0c\u5982\u679c\u8bf4\u6c89\u8ff7\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u7b97\u4f5c\u4e00\u79cd\u4e50\u8da3\u7684\u8bdd\uff0c\u90a3\u4e48\u4e0e\u6b64\u540c\u65f6\u53cd\u8fc7\u6765\u53bb\u9ed1\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u5c31\u662f\u8fd9\u79cd\u4e50\u8da3\u7684\u5347\u534e\u3002\u4eca\u5929\u6211\u4eec\u5c31\u6765\u9ed1\u4e00\u628aC\u8bed\u8a00\uff0c\u597d\u597d\u5c55\u793a\u4e00\u4e0b\u8fd9\u95e8\u7ecf\u5178\u8bed\u8a00\u4ee4\u4eba\u6293\u72c2\u7684\u4e00\u9762\u3002<\/p>\n<p>\u6211\u4eec\u77e5\u9053\uff0c\u5168\u5c40\u53d8\u91cf\u662fC\u8bed\u8a00\u8bed\u6cd5\u548c\u8bed\u4e49\u4e2d\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u77e5\u8bc6\u70b9\uff0c\u9996\u5148\u5b83\u7684\u5b58\u5728\u610f\u4e49\u9700\u8981\u4ece\u4e09\u4e2a\u4e0d\u540c\u89d2\u5ea6\u53bb\u7406\u89e3\uff1a\u5bf9\u4e8e\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u5b83\u662f\u4e00\u4e2a\u8bb0\u5f55\u5185\u5bb9\u7684<strong>\u53d8\u91cf(variable)<\/strong>\uff1b\u5bf9\u4e8e\u7f16\u8bd1\/\u94fe\u63a5\u5668\u6765\u8bf4\uff0c\u5b83\u662f\u4e00\u4e2a\u9700\u8981\u89e3\u6790\u7684<strong>\u7b26\u53f7(symbol)<\/strong>\uff1b\u5bf9\u4e8e\u8ba1\u7b97\u673a\u6765\u8bf4\uff0c\u5b83\u53ef\u80fd\u662f\u5177\u6709\u5730\u5740\u7684\u4e00\u5757<strong>\u5185\u5b58(memory)<\/strong>\u3002\u5176\u6b21\u662f\u8bed\u6cd5\/\u8bed\u4e49\uff1a\u4ece\u4f5c\u7528\u57df\u4e0a\u770b\uff0c\u5e26static\u5173\u952e\u5b57\u7684\u5168\u5c40\u53d8\u91cf\u8303\u56f4\u53ea\u80fd\u9650\u5b9a\u5728\u6587\u4ef6\u91cc\uff0c\u5426\u5219\u4f1a\u5916\u8054\u5230\u6574\u4e2a\u6a21\u5757\u548c\u9879\u76ee\u4e2d\uff1b\u4ece\u751f\u5b58\u671f\u6765\u770b\uff0c\u5b83\u662f\u9759\u6001\u7684\uff0c\u8d2f\u7a7f\u6574\u4e2a\u7a0b\u5e8f\u6216\u6a21\u5757\u8fd0\u884c\u671f\u95f4\uff08<span style=\"color: #ff0000;\"><strong>\u6ce8\u610f\uff0c\u6b63\u662f\u8de8\u5355\u5143\u8bbf\u95ee\u548c\u6301\u7eed\u751f\u5b58\u5468\u671f\u8fd9\u4e24\u4e2a\u7279\u70b9\u4f7f\u5f97\u5168\u5c40\u53d8\u91cf\u5f80\u5f80\u6210\u4e3a\u4e00\u6bb5\u53d7\u653b\u51fb\u4ee3\u7801\u7684\u7a81\u7834\u53e3\uff0c\u4e86\u89e3\u8fd9\u4e00\u70b9\u5341\u5206\u91cd\u8981<\/strong><\/span>\uff09\uff1b\u4ece\u7a7a\u95f4\u5206\u914d\u4e0a\u770b\uff0c\u5b9a\u4e49\u4e14\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u5728\u7f16\u8bd1\u65f6\u5728\u6570\u636e\u6bb5(.data)\u5206\u914d\u7a7a\u95f4\uff0c\u5b9a\u4e49\u4f46\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf<strong>\u6682\u5b58(tentative definition)<\/strong>\u5728.bss\u6bb5\uff0c\u7f16\u8bd1\u65f6\u81ea\u52a8\u6e05\u96f6\uff0c\u800c\u4ec5\u4ec5\u662f\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\u53ea\u80fd\u7b97\u4e2a\u7b26\u53f7\uff0c\u5bc4\u5b58\u5728\u7f16\u8bd1\u5668\u7684\u7b26\u53f7\u8868\u5185\uff0c\u4e0d\u4f1a\u5206\u914d\u7a7a\u95f4\uff0c\u76f4\u5230\u94fe\u63a5\u6216\u8005\u8fd0\u884c\u65f6\u518d\u91cd\u5b9a\u5411\u5230\u76f8\u5e94\u7684\u5730\u5740\u4e0a\u3002<\/p>\n<p>\u6211\u4eec\u5c06\u5411\u60a8\u5c55\u73b0\u4e00\u4e0b\uff0c<strong>\u975estatic\u9650\u5b9a\u5168\u5c40\u53d8\u91cf<\/strong>\u5728\u7f16\u8bd1\/\u94fe\u63a5\u4ee5\u53ca\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4f1a\u53d1\u751f\u54ea\u4e9b\u6709\u8da3\u7684\u4e8b\u60c5\uff0c\u987a\u4fbf\u53ef\u4ee5\u5bf9C\u7f16\u8bd1\u5668\/\u94fe\u63a5\u5668\u7684\u89e3\u6790\u539f\u7406\u7ba1\u4e2d\u7aa5\u8c79\u3002\u4ee5\u4e0b\u793a\u4f8b\u5bf9ANSI C\u548cGNU C\u6807\u51c6\u90fd\u6709\u6548\uff0c\u7b14\u8005\u7684\u7f16\u8bd1\u73af\u5883\u662fUbuntu\u4e0b\u7684GCC-4.4.3\u3002<\/p>\n<p><!--more--><\/p>\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_48 counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">\u76ee\u5f55<\/p>\n<span class=\"ez-toc-title-toggle\"><\/span><\/div>\n<nav><ul class='ez-toc-list ez-toc-list-level-1 ' ><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/coolshell.cn\/articles\/10115.html\/#%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90\" title=\"\u7b2c\u4e00\u4e2a\u4f8b\u5b50\">\u7b2c\u4e00\u4e2a\u4f8b\u5b50<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/coolshell.cn\/articles\/10115.html\/#%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%BE%8B%E5%AD%90\" title=\"\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\">\u7b2c\u4e8c\u4e2a\u4f8b\u5b50<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/coolshell.cn\/articles\/10115.html\/#%E7%AC%AC%E4%B8%89%E4%B8%AA%E4%BE%8B%E5%AD%90\" title=\"\u7b2c\u4e09\u4e2a\u4f8b\u5b50\">\u7b2c\u4e09\u4e2a\u4f8b\u5b50<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/coolshell.cn\/articles\/10115.html\/#%E7%AC%AC%E5%9B%9B%E4%B8%AA%E4%BE%8B%E5%AD%90\" title=\"\u7b2c\u56db\u4e2a\u4f8b\u5b50\">\u7b2c\u56db\u4e2a\u4f8b\u5b50<\/a><\/li><\/ul><\/nav><\/div>\n<h4><span class=\"ez-toc-section\" id=\"%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90\"><\/span>\u7b2c\u4e00\u4e2a\u4f8b\u5b50<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<pre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\">\/* t.h *\/\r\n#ifndef _H_\r\n#define _H_\r\nint a;\r\n#endif\r\n\r\n\/* foo.c *\/\r\n#include &lt;stdio.h&gt;\r\n#include &quot;t.h&quot;\r\n\r\nstruct {\r\n   char a;\r\n   int b;\r\n} b = { 2, 4 };\r\n\r\nint main();\r\n\r\nvoid foo()\r\n{\r\n    printf(&quot;foo:\\t(&amp;a)=0x%08x\\n\\t(&amp;b)=0x%08x\\n\r\n        \\tsizeof(b)=%d\\n\\tb.a=%d\\n\\tb.b=%d\\n\\tmain:0x%08x\\n&quot;,\r\n        &amp;a, &amp;b, sizeof b, b.a, b.b, main);\r\n}\r\n\r\n\/* main.c *\/\r\n#include &lt;stdio.h&gt;\r\n#include &quot;t.h&quot;\r\n\r\nint b;\r\nint c;\r\n\r\nint main()\r\n{\r\n    foo();\r\n    printf(&quot;main:\\t(&amp;a)=0x%08x\\n\\t(&amp;b)=0x%08x\\n\r\n        \\t(&amp;c)=0x%08x\\n\\tsize(b)=%d\\n\\tb=%d\\n\\tc=%d\\n&quot;,\r\n        &amp;a, &amp;b, &amp;c, sizeof b, b, c);\r\n\treturn 0;\r\n}\r\n<\/pre>\n<p>Makefile\u5982\u4e0b\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\ntest: main.o foo.o\r\n\tgcc -o test main.o foo.o\r\n\r\nmain.o: main.c\r\nfoo.o: foo.c\r\n\r\nclean:\r\n\trm *.o test\r\n<\/pre>\n<p>\u8fd0\u884c\u60c5\u51b5\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\nfoo:\t(&amp;a)=0x0804a024\r\n\t(&amp;b)=0x0804a014\r\n\tsizeof(b)=8\r\n\tb.a=2\r\n\tb.b=4\r\n\tmain:0x080483e4\r\nmain:\t(&amp;a)=0x0804a024\r\n\t(&amp;b)=0x0804a014\r\n\t(&amp;c)=0x0804a028\r\n\tsize(b)=4\r\n\tb=2\r\n\tc=0\r\n<\/pre>\n<p>\u8fd9\u4e2a\u9879\u76ee\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u56db\u4e2a\u5168\u5c40\u53d8\u91cf\uff0ct.h\u5934\u6587\u4ef6\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6574\u578ba\uff0cmain.c\u91cc\u5b9a\u4e49\u4e86\u4e24\u4e2a\u6574\u578bb\u548cc\u5e76\u4e14\u672a\u521d\u59cb\u5316\uff0cfoo.c\u91cc\u5b9a\u4e49\u4e86\u4e00\u4e2a\u521d\u59cb\u5316\u4e86\u7684\u7ed3\u6784\u4f53\uff0c\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e2amain\u7684\u51fd\u6570\u6307\u9488\u53d8\u91cf\u3002\u7531\u4e8eC\u8bed\u8a00\u6bcf\u4e2a\u6e90\u6587\u4ef6\u5355\u72ec\u7f16\u8bd1\uff0c\u6240\u4ee5t.h\u5206\u522b\u5305\u542b\u4e86\u4e24\u6b21\uff0c\u6240\u4ee5int a\u5c31\u88ab\u5b9a\u4e49\u4e86\u4e24\u6b21\u3002\u4e24\u4e2a\u6e90\u6587\u4ef6\u91cc\u53d8\u91cfb\u548c\u51fd\u6570\u6307\u9488\u53d8\u91cfmain\u88ab\u91cd\u590d\u5b9a\u4e49\u4e86\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u770b\u505a\u4ee3\u7801\u6bb5\u7684\u5730\u5740\u3002\u4f46\u7f16\u8bd1\u5668\u5e76\u672a\u62a5\u9519\uff0c\u53ea\u7ed9\u51fa\u4e00\u6761\u8b66\u544a\uff1a<\/p>\n<p><code data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\/usr\/bin\/ld: Warning: size of symbol &#039;b&#039; changed from 4 in main.o to 8 in foo.o<\/code><\/p>\n<p>\u8fd0\u884c\u7a0b\u5e8f\u53d1\u73b0\uff0cmain.c\u6253\u5370\u4e2db\u5927\u5c0f\u662f4\u4e2a\u5b57\u8282\uff0c\u800cfoo.c\u662f8\u4e2a\u5b57\u8282\uff0c\u56e0\u4e3asizeof\u5173\u952e\u5b57\u662f\u7f16\u8bd1\u65f6\u51b3\u8bae\uff0c\u800c\u6e90\u6587\u4ef6\u4e2d\u5bf9b\u7c7b\u578b\u5b9a\u4e49\u4e0d\u4e00\u6837\u3002\u4f46\u4ee4\u4eba\u60ca\u5947\u7684\u662f\u65e0\u8bba\u662f\u5728main.c\u8fd8\u662ffoo.c\u4e2d\uff0ca\u548cb\u90fd\u662f\u76f8\u540c\u7684\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0ca\u548cb\u88ab\u5b9a\u4e49\u4e86\u4e24\u6b21\uff0cb\u8fd8\u662f\u4e0d\u540c\u7c7b\u578b\uff0c\u4f46\u5185\u5b58\u6620\u50cf\u4e2d\u53ea\u6709\u4e00\u4efd\u62f7\u8d1d\u3002\u6211\u4eec\u8fd8\u770b\u5230\uff0cmain.c\u4e2db\u7684\u503c\u5c45\u7136\u5c31\u662ffoo.c\u4e2d\u7ed3\u6784\u4f53\u7b2c\u4e00\u4e2a\u6210\u5458\u53d8\u91cfb.a\u7684\u503c\uff0c\u8fd9\u8bc1\u5b9e\u4e86\u524d\u9762\u7684\u63a8\u65ad\u2014\u2014<strong>\u5373\u4fbf\u5b58\u5728\u591a\u6b21\u5b9a\u4e49\uff0c\u5185\u5b58\u4e2d\u53ea\u6709\u4e00\u4efd\u521d\u59cb\u5316\u7684\u62f7\u8d1d\u3002<\/strong>\u53e6\u5916\u5728\u8fd9\u91ccc\u662f\u7f6e\u8eab\u4e8b\u5916\u7684\u4e00\u4e2a\u72ec\u7acb\u53d8\u91cf\u3002<\/p>\n<p>\u4e3a\u4f55\u4f1a\u8fd9\u6837\u5462\uff1f\u8fd9\u6d89\u53ca\u5230<strong>C\u7f16\u8bd1\u5668\u5bf9\u591a\u91cd\u5b9a\u4e49\u7684\u5168\u5c40\u7b26\u53f7\u7684\u89e3\u6790\u548c\u94fe\u63a5\u3002<\/strong>\u5728\u7f16\u8bd1\u9636\u6bb5\uff0c\u7f16\u8bd1\u5668\u5c06\u5168\u5c40\u7b26\u53f7\u4fe1\u606f\u9690\u542b\u5730\u7f16\u7801\u5728\u53ef\u91cd\u5b9a\u4f4d\u76ee\u6807\u6587\u4ef6\u7684\u7b26\u53f7\u8868\u91cc\u3002\u8fd9\u91cc\u6709\u4e2a<strong>\u201c\u5f3a\u7b26\u53f7(strong)\u201d<\/strong>\u548c<strong>\u201c\u5f31\u7b26\u53f7(weak)\u201d<\/strong>\u7684\u6982\u5ff5\u2014\u2014\u524d\u8005\u6307\u7684\u662f\u5b9a\u4e49\u5e76\u4e14\u521d\u59cb\u5316\u4e86\u7684\u53d8\u91cf\uff0c\u6bd4\u5982foo.c\u91cc\u7684\u7ed3\u6784\u4f53b\uff0c\u540e\u8005\u6307\u7684\u662f\u672a\u5b9a\u4e49\u6216\u8005\u5b9a\u4e49\u4f46\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\uff0c\u6bd4\u5982main.c\u91cc\u7684\u6574\u578bb\u548cc\uff0c\u8fd8\u6709\u4e24\u4e2a\u6e90\u6587\u4ef6\u90fd\u5305\u542b\u5934\u6587\u4ef6\u91cc\u7684a\u3002\u5f53\u7b26\u53f7\u88ab\u591a\u91cd\u5b9a\u4e49\u65f6\uff0cGNU\u94fe\u63a5\u5668(ld)\u4f7f\u7528\u4ee5\u4e0b\u89c4\u5219\u51b3\u8bae\uff1a<\/p>\n<ul>\n<li>\u4e0d\u5141\u8bb8\u51fa\u73b0\u591a\u4e2a\u76f8\u540c\u5f3a\u7b26\u53f7\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u5982\u679c\u6709\u4e00\u4e2a\u5f3a\u7b26\u53f7\u548c\u591a\u4e2a\u5f31\u7b26\u53f7\uff0c\u5219\u9009\u62e9\u5f3a\u7b26\u53f7\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u5982\u679c\u6709\u591a\u4e2a\u5f31\u7b26\u53f7\uff0c\u90a3\u4e48\u5148\u51b3\u8bae\u5230size\u6700\u5927\u7684\u90a3\u4e2a\uff0c\u5982\u679c\u540c\u6837\u5927\u5c0f\uff0c\u5219\u6309\u7167\u94fe\u63a5\u987a\u5e8f\u9009\u62e9\u7b2c\u4e00\u4e2a\u3002<\/li>\n<\/ul>\n<p>\u50cf\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5168\u5c40\u53d8\u91cfa\u548cb\u5b58\u5728\u91cd\u590d\u5b9a\u4e49\u3002\u5982\u679c\u6211\u4eec\u5c06main.c\u4e2d\u7684b\u521d\u59cb\u5316\u8d4b\u503c\uff0c\u90a3\u4e48\u5c31\u5b58\u5728\u4e24\u4e2a\u5f3a\u7b26\u53f7\u800c\u8fdd\u53cd\u4e86\u89c4\u5219\u4e00\uff0c\u7f16\u8bd1\u5668\u62a5\u9519\u3002\u5982\u679c\u6ee1\u8db3\u89c4\u5219\u4e8c\uff0c\u5219\u4ec5\u4ec5\u63d0\u51fa\u8b66\u544a\uff0c\u5b9e\u9645\u8fd0\u884c\u65f6\u51b3\u8bae\u7684\u662ffoo.c\u4e2d\u7684\u5f3a\u7b26\u53f7\u3002\u800c\u53d8\u91cfa\u90fd\u662f\u5f31\u7b26\u53f7\uff0c\u6240\u4ee5\u53ea\u9009\u62e9\u4e00\u4e2a\uff08\u6309\u7167\u76ee\u6807\u6587\u4ef6\u94fe\u63a5\u65f6\u7684\u987a\u5e8f\uff09\u3002<\/p>\n<p>\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u79cd\u89c4\u5219\u662fC\u8bed\u8a00\u91cc\u7684\u4e00\u4e2a\u5927\u5751\uff0c\u7f16\u8bd1\u5668\u5bf9\u8fd9\u79cd\u5168\u5c40\u53d8\u91cf\u591a\u91cd\u5b9a\u4e49\u7684\u201c\u7eb5\u5bb9\u201d\u5f88\u53ef\u80fd\u4f1a\u65e0\u7aef\u4fee\u6539\u67d0\u4e2a\u53d8\u91cf\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u4e0d\u786e\u5b9a\u884c\u4e3a\u3002\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u610f\u8bc6\u5230\u4e8b\u6001\u4e25\u91cd\u6027\uff0c\u6211\u518d\u4e3e\u4e2a\u4f8b\u5b50\u3002<\/p>\n<h4><span class=\"ez-toc-section\" id=\"%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%BE%8B%E5%AD%90\"><\/span>\u7b2c\u4e8c\u4e2a\u4f8b\u5b50<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<pre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\">\/* foo.c *\/\r\n#include &lt;stdio.h&gt;;\r\n\r\nstruct {\r\n    int a;\r\n    int b;\r\n} b = { 2, 4 };\r\n\r\nint main();\r\n\r\nvoid foo()\r\n{\r\n    printf(&quot;foo:\\t(&amp;b)=0x%08x\\n\\tsizeof(b)=%d\\n\r\n        \\tb.a=%d\\n\\tb.b=%d\\n\\tmain:0x%08x\\n&quot;,\r\n        &amp;b, sizeof b, b.a, b.b, main);\r\n}\r\n\r\n\/* main.c *\/\r\n#include &lt;stdio.h&gt;\r\n\r\nint b;\r\nint c;\r\n\r\nint main()\r\n{\r\n    if (0 == fork()) {\r\n        sleep(1);\r\n        b = 1;\r\n        printf(&quot;child:\\tsleep(1)\\n\\t(&amp;b):0x%08x\\n\r\n            \\t(&amp;c)=0x%08x\\n\\tsizeof(b)=%d\\n\\tset b=%d\\n\\tc=%d\\n&quot;,\r\n            &amp;b, &amp;c, sizeof b, b, c);\r\n        foo();\r\n    } else {\r\n        foo();\r\n        printf(&quot;parent:\\t(&amp;b)=0x%08x\\n\\t(&amp;c)=0x%08x\\n\r\n            \\tsizeof(b)=%d\\n\\tb=%d\\n\\tc=%d\\n\\twait child...\\n&quot;,\r\n            &amp;b, &amp;c, sizeof b, b, c);\r\n        wait(-1);\r\n        printf(&quot;parent:\\tchild over\\n\\t(&amp;b)=0x%08x\\n\r\n            \\t(&amp;c)=0x%08x\\n\\tsizeof(b)=%d\\n\\tb=%d\\n\\tc=%d\\n&quot;,\r\n            &amp;b, &amp;c, sizeof b, b, c);\r\n    }\r\n    return 0;\r\n}<\/pre>\n<p>\u8fd0\u884c\u60c5\u51b5\u5982\u4e0b\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\nfoo:\t(&amp;b)=0x0804a020\r\n\tsizeof(b)=8\r\n\tb.a=2\r\n\tb.b=4\r\n\tmain:0x080484c8\r\nparent:\t(&amp;b)=0x0804a020\r\n\t(&amp;c)=0x0804a034\r\n\tsizeof(b)=4\r\n\tb=2\r\n\tc=0\r\n\twait child...\r\nchild:\tsleep(1)\r\n\t(&amp;b):0x0804a020\r\n\t(&amp;c)=0x0804a034\r\n\tsizeof(b)=4\r\n\tset b=1\r\n\tc=0\r\nfoo:\t(&amp;b)=0x0804a020\r\n\tsizeof(b)=8\r\n\tb.a=1\r\n\tb.b=4\r\n\tmain:0x080484c8\r\nparent:\tchild over\r\n\t(&amp;b)=0x0804a020\r\n\t(&amp;c)=0x0804a034\r\n\tsizeof(b)=4\r\n\tb=2\r\n\tc=0\r\n<\/pre>\n<p>\uff08\u8bf4\u660e\u4e00\u70b9\uff0c\u8fd0\u884c\u60c5\u51b5\u662f\u76f4\u63a5\u8f93\u51fa\u5230stdout\u7684\u6253\u5370\uff0c\u7b14\u8005\u66fe\u7ecf\u5c06.\/test\u8f93\u51fa\u91cd\u5b9a\u5411\u5230log\u4e2d\uff0c\u7ed3\u679c\u53d1\u73b0\u6253\u5370\u7684\u6267\u884c\u5e8f\u5217\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5\u91c7\u7528\u9ed8\u8ba4\u8f93\u51fa\u3002\uff09<\/p>\n<p>\u8fd9\u662f\u4e00\u4e2a<strong>\u591a\u8fdb\u7a0b\u73af\u5883<\/strong>\uff0c\u9996\u5148\u6211\u4eec\u770b\u5230\u65e0\u8bba\u7236\u8fdb\u7a0b\u8fd8\u662f\u5b50\u8fdb\u7a0b\uff0cmain.c\u8fd8\u662ffoo.c\uff0c\u5168\u5c40\u53d8\u91cfb\u548cc\u7684\u5730\u5740\u4ecd\u7136\u662f\u4e00\u81f4\u7684\uff08\u5f53\u7136\u53ea\u662f\u4e2a<strong>\u903b\u8f91\u5730\u5740<\/strong>\uff09\uff0c\u800c\u4e14\u5bf9b\u7684\u5927\u5c0f\u4e0d\u540c\u6a21\u5757\u4ecd\u7136\u6709\u4e0d\u540c\u7684\u51b3\u8bae\u3002\u8fd9\u91cc\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5728\u5b50\u8fdb\u7a0b\u4e2d\u5bf9\u53d8\u91cfb\u8fdb\u884c\u8d4b\u503c\u52a8\u4f5c\uff0c\u4ece\u6b64\u5b50\u8fdb\u7a0b\u672c\u8eab\u5305\u62ecfoo()\u8c03\u7528\u4e2d\uff0c\u6574\u578bb\u4ee5\u53ca\u7ed3\u6784\u4f53\u6210\u5458b.a\u7684\u503c\u90fd\u662f1\uff0c\u800c\u7236\u8fdb\u7a0b\u4e2d\u6574\u578bb\u548c\u7ed3\u6784\u4f53\u6210\u5458b.a\u7684\u503c\u4ecd\u662f2\uff0c\u4f46\u5b83\u4eec\u663e\u793a\u7684\u903b\u8f91\u5730\u5740\u4ecd\u662f\u4e00\u81f4\u7684\u3002<\/p>\n<p>\u4e2a\u4eba\u8ba4\u4e3a\u53ef\u4ee5\u8fd9\u6837\u89e3\u91ca\uff0cfork\u521b\u5efa\u65b0\u8fdb\u7a0b\u65f6\uff0c\u5b50\u8fdb\u7a0b\u83b7\u5f97\u4e86\u7236\u8fdb\u7a0b\u4e0a\u4e0b\u6587\u201c\u955c\u50cf\u201d\uff08\u81ea\u7136\u5305\u62ec\u5168\u5c40\u53d8\u91cf\uff09\uff0c\u865a\u62df\u5730\u5740\u76f8\u540c\u4f46\u5c5e\u4e8e\u4e0d\u540c\u7684\u8fdb\u7a0b\u7a7a\u95f4\uff0c\u800c\u4e14\u6b64\u65f6\u771f\u6b63\u6620\u5c04\u7684\u7269\u7406\u5730\u5740\u4e2d\u53ea\u6709\u4e00\u4efd\u62f7\u8d1d\uff0c\u6240\u4ee5b\u7684\u503c\u662f\u76f8\u540c\u7684\uff08\u90fd\u662f2\uff09\u3002\u968f\u540e\u5b50\u8fdb\u7a0b\u5bf9b\u6539\u5199\uff0c\u89e6\u53d1\u4e86\u64cd\u4f5c\u7cfb\u7edf\u7684<strong>\u5199\u65f6\u62f7\u8d1d(copy on write)<\/strong>\u673a\u5236\uff0c\u8fd9\u65f6\u7269\u7406\u5185\u5b58\u4e2d\u624d\u4ea7\u751f\u771f\u6b63\u7684\u4e24\u4efd\u62f7\u8d1d\uff0c\u5206\u522b\u6620\u5c04\u5230\u4e0d\u540c\u8fdb\u7a0b\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\u4e0a\uff0c\u4f46\u865a\u62df\u5730\u5740\u7684\u503c\u672c\u8eab\u4ecd\u7136\u4e0d\u53d8\uff0c\u8fd9\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u662f\u900f\u660e\u7684\uff0c\u5177\u6709\u9690\u7792\u6027\u3002<\/p>\n<p>\u8fd8\u6709\u4e00\u70b9\u503c\u5f97\u6ce8\u610f\uff0c\u8fd9\u4e2a\u793a\u4f8b\u7f16\u8bd1\u65f6\u6ca1\u6709\u51fa\u73b0\u7b2c\u4e00\u4e2a\u793a\u4f8b\u7684\u8b66\u544a\uff0c\u5373\u5bf9\u53d8\u91cfb\u7684sizeof\u51b3\u8bae\uff0c\u7b14\u8005\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u6216\u8bb8\u662fGCC\u7684\u4e00\u4e2abug\uff1f<\/p>\n<h4><span class=\"ez-toc-section\" id=\"%E7%AC%AC%E4%B8%89%E4%B8%AA%E4%BE%8B%E5%AD%90\"><\/span>\u7b2c\u4e09\u4e2a\u4f8b\u5b50<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>\u8fd9\u4e2a\u4f8b\u5b50\u4ee3\u7801\u540c\u4e0a\u4e00\u4e2a\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u5c06foo.c\u505a\u6210\u4e00\u4e2a\u9759\u6001\u94fe\u63a5\u5e93libfoo.a\u8fdb\u884c\u94fe\u63a5\uff0c\u8fd9\u91cc\u53ea\u7ed9\u51faMakefile\u7684\u6539\u52a8\u3002<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\ntest: main.o foo.o\r\n\tar rcs libfoo.a foo.o\r\n\tgcc -static -o test main.o libfoo.a\r\n\r\nmain.o: main.c\r\nfoo.o: foo.c\r\n\r\nclean:\r\n\trm -f *.o test\r\n<\/pre>\n<p>\u8fd0\u884c\u60c5\u51b5\u5982\u4e0b\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\nfoo:\t(&amp;b)=0x080ca008\r\n\tsizeof(b)=8\r\n\tb.a=2\r\n\tb.b=4\r\n\tmain:0x08048250\r\nparent:\t(&amp;b)=0x080ca008\r\n\t(&amp;c)=0x080cc084\r\n\tsizeof(b)=4\r\n\tb=2\r\n\tc=0\r\n\twait child...\r\nchild:\tsleep(1)\r\n\t(&amp;b):0x080ca008\r\n\t(&amp;c)=0x080cc084\r\n\tsizeof(b)=4\r\n\tset b=1\r\n\tc=0\r\nfoo:\t(&amp;b)=0x080ca008\r\n\tsizeof(b)=8\r\n\tb.a=1\r\n\tb.b=4\r\n\tmain:0x08048250\r\nparent:\tchild over\r\n\t(&amp;b)=0x080ca008\r\n\t(&amp;c)=0x080cc084\r\n\tsizeof(b)=4\r\n\tb=2\r\n\tc=0\r\n<\/pre>\n<p>\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u770b\u4e0d\u51fa\u6709\u5565\u5dee\u522b\uff0c\u53ea\u4e0d\u8fc7\u4f7f\u7528<strong>\u9759\u6001\u94fe\u63a5<\/strong>\u540e\uff0c\u5168\u5c40\u53d8\u91cf\u52a0\u8f7d\u7684\u5730\u5740\u6709\u6240\u6539\u53d8\uff0cb\u548cc\u7684\u5730\u5740\u4e4b\u95f4\u4f3c\u4e4e\u76f8\u9694\u66f4\u8fdc\u4e86\u4e9b\u3002\u4e0d\u8fc7\u8fd9\u6b21\u7f16\u8bd1\u5668\u5012\u662f\u7ed9\u51fa\u4e86\u53d8\u91cfb\u7684sizeof\u51b3\u8bae\u8b66\u544a\u3002<\/p>\n<p>\u5230\u6b64\u4e3a\u6b62\uff0c\u6709\u4e9b\u4eba\u53ef\u80fd\u4f1a\u5bf9\u4e0a\u9762\u7684\u4f8b\u5b50\u55e4\u4e4b\u4ee5\u9f3b\uff0c\u89c9\u5f97\u8fd9\u4e0d\u8fc7\u662f\u5217\u4e3e\u4e86C\u8bed\u8a00\u7684\u67d0\u4e9b\u7279\u6027\u800c\u5df2\uff0c\u7b97\u4e0d\u4e0a\u9ed1\u3002\u6709\u4e9b\u4eba\u8ba4\u4e3a\u65e2\u7136\u5982\u6b64\uff0c\u5bf9\u4e8e\u4e00\u5207\u5168\u5c40\u53d8\u91cf\u8981\u4e48\u7528static\u9650\u6b7b\uff0c\u8981\u4e48\u5b9a\u4e49\u540c\u65f6\u521d\u59cb\u5316\uff0c\u675c\u7edd\u5f31\u7b26\u53f7\uff0c\u4ee5\u4fbf\u5728\u7f16\u8bd1\u65f6\u62a5\u9519\u68c0\u6d4b\u51fa\u6765\u3002\u53ea\u8981\u5c0f\u5fc3\u5730\u4f7f\u7528\uff0cC\u8bed\u8a00\u8fd8\u662f\u5f88\u5b8c\u7f8e\u7684\u561b~\u5bf9\u4e8e\u62b1\u8fd9\u6837\u60f3\u6cd5\u7684\u4eba\uff0c\u6211\u53ea\u60f3\u8bf4\uff0c\u8bf7\u4f60\u5728\u591c\u6df1\u4eba\u9759\u7684\u65f6\u5019\u7ad6\u8d77\u8033\u6735\u4ed4\u7ec6\u8046\u542c\uff0c\u4f60\u5f88\u53ef\u80fd\u542c\u5230Dennis Richie\u5728\u4e5d\u6cc9\u4e4b\u4e0b\u90aa\u6076\u7684\u7b11\u58f0\u2014\u2014\u4e0d\uff0c\u4e0e\u5176\u8bf4\u662f\u5632\u7b11\uff0c\u4e0d\u5982\u8bf4\u662f\u8bc5\u5492\u2026\u2026<\/p>\n<h4><span class=\"ez-toc-section\" id=\"%E7%AC%AC%E5%9B%9B%E4%B8%AA%E4%BE%8B%E5%AD%90\"><\/span>\u7b2c\u56db\u4e2a\u4f8b\u5b50<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<pre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\">\/* foo.c *\/\r\n#include &lt;stdio.h&gt;\r\n\r\nconst struct {\r\n    int a;\r\n    int b;\r\n} b = { 3, 3 };\r\n\r\nint main();\r\n\r\nvoid foo()\r\n{\r\n    b.a = 4;\r\n    b.b = 4;\r\n    printf(&quot;foo:\\t(&amp;b)=0x%08x\\n\\tsizeof(b)=%d\\n\r\n        \\tb.a=%d\\n\\tb.b=%d\\n\\tmain:0x%08x\\n&quot;,\r\n        &amp;b, sizeof b, b.a, b.b, main);\r\n}\r\n\r\n\/* t1.c *\/\r\n#include &lt;stdio.h&gt;\r\n\r\nint b = 1;\r\nint c = 1;\r\n\r\nint main()\r\n{\r\n    int count = 5;\r\n    while (count-- &gt; 0) {\r\n        t2();\r\n        foo();\r\n        printf(&quot;t1:\\t(&amp;b)=0x%08x\\n\\t(&amp;c)=0x%08x\\n\r\n            \\tsizeof(b)=%d\\n\\tb=%d\\n\\tc=%d\\n&quot;,\r\n            &amp;b, &amp;c, sizeof b, b, c);\r\n        sleep(1);\r\n    }\r\n    return 0;\r\n}\r\n\r\n\/* t2.c *\/\r\n#include &lt;stdio.h&gt;\r\n\r\nint b;\r\nint c;\r\n\r\nint t2()\r\n{\r\n    printf(&quot;t2:\\t(&amp;b)=0x%08x\\n\\t(&amp;c)=0x%08x\\n\r\n        \\tsizeof(b)=%d\\n\\tb=%d\\n\\tc=%d\\n&quot;,\r\n        &amp;b, &amp;c, sizeof b, b, c);\r\n    return 0;\r\n}<\/pre>\n<p>Makefile\u811a\u672c\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">export LD_LIBRARY_PATH:=.\r\n\r\nall: test\r\n\t.\/test\r\n\r\ntest: t1.o t2.o\r\n\tgcc -shared -fPIC -o libfoo.so foo.c\r\n\tgcc -o test t1.o t2.o -L. -lfoo\r\n\r\nt1.o: t1.c\r\nt2.o: t2.c\r\n\r\n.PHONY:clean\r\nclean:\r\n\trm -f *.o *.so test*\r\n<\/pre>\n<p>\u6267\u884c\u7ed3\u679c\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\n.\/test\r\nt2:\t(&amp;b)=0x0804a01c\r\n\t(&amp;c)=0x0804a020\r\n\tsizeof(b)=4\r\n\tb=1\r\n\tc=1\r\nfoo:\t(&amp;b)=0x0804a01c\r\n\tsizeof(b)=8\r\n\tb.a=4\r\n\tb.b=4\r\n\tmain:0x08048564\r\nt1:\t(&amp;b)=0x0804a01c\r\n\t(&amp;c)=0x0804a020\r\n\tsizeof(b)=4\r\n\tb=4\r\n\tc=4\r\nt2:\t(&amp;b)=0x0804a01c\r\n\t(&amp;c)=0x0804a020\r\n\tsizeof(b)=4\r\n\tb=4\r\n\tc=4\r\nfoo:\t(&amp;b)=0x0804a01c\r\n\tsizeof(b)=8\r\n\tb.a=4\r\n\tb.b=4\r\n\tmain:0x08048564\r\nt1:\t(&amp;b)=0x0804a01c\r\n\t(&amp;c)=0x0804a020\r\n\tsizeof(b)=4\r\n\tb=4\r\n\tc=4\r\n\t...<\/pre>\n<p>\u5176\u5b9e\u524d\u9762\u51e0\u4e2a\u4f8b\u5b50\u53ea\u662f\u5f00\u80c3\u5c0f\u83dc\u800c\u5df2\uff0c\u771f\u6b63\u7684\u5927\u5751\u7ec8\u4e8e\u51fa\u73b0\u4e86\uff01\u800c\u4e14\u8fd9\u6b21\u7f16\u8bd1\u5668\u65e2\u6ca1\u62a5\u9519\u4e5f\u6ca1\u8b66\u544a\uff0c\u4f46\u6211\u4eec\u786e\u5b9e\u773c\u7741\u7741\u5730\u770b\u5230\u4f5c\u4e3amain()\u4e2d\u5f3a\u7b26\u53f7\u7684b\u88ab\u6539\u5199\u4e86\uff0c\u800c\u4e14\u4e00\u65c1\u7684c\u4e5f\u201c\u8eba\u67aa\u201d\u4e86\u3002\u773c\u5c16\u7684\u8bfb\u8005\u53d1\u73b0\uff0c\u8fd9\u6b21foo.c\u662f\u4f5c\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93\u8fd0\u884c\u65f6\u52a0\u8f7d\u7684\uff0c\u5f53t1\u7b2c\u4e00\u6b21\u8c03\u7528t2\u65f6\uff0clibfoo.so\u8fd8\u672a\u52a0\u8f7d\uff0c\u4e00\u65e6\u8c03\u7528\u4e86foo\u51fd\u6570\uff0cb\u7acb\u9a6c\u4e2d\u5f39\uff0c\u800c\u4e14<strong>c\u7684\u5730\u5740\u5c45\u7136\u8fd8\u76f8\u90bb\u7740b\uff0c\u8fd9\u4f7f\u5f97c\u4e00\u540c\u4e2d\u5f39\u4e86\u3002<\/strong>\u4e0d\u8fc7\u7b14\u8005\u6709\u4e9b\u65e0\u6cd5\u89e3\u91ca\u8fd9\u79cd\u884c\u4e3a\u7684\u539f\u56e0\uff0c\u6709\u79cd\u8bf4\u6cd5\u662f\u5f3a\u7b26\u53f7\u7684\u5168\u5c40\u53d8\u91cf\u5728\u6570\u636e\u6bb5\u4e2d\u662f\u8fde\u7eed\u5206\u5e03\u7684\uff08\u76f8\u5e94\u5730\u5f31\u7b26\u53f7\u6682\u5b58\u5728.bss\u6bb5\u6216\u8005\u7b26\u53f7\u8868\u91cc\uff09\uff0c\u6216\u8bb8\u53ef\u4ee5\u4e0a\u62a5GNU\u7684\u7f16\u8bd1\u5668\u5f00\u53d1\u5c0f\u7ec4\u3002<\/p>\n<p>\u53e6\u5916\u7b14\u8005\u5c1d\u8bd5\u8fc7\u5c06t1.c\u4e2d\u7684b\u548cc\u5b9a\u4e49\u524d\u9762\u52a0\u4e0a<strong>const\u9650\u5b9a\u8bcd<\/strong>\uff0c\u7f16\u8bd1\u5668\u4ecd\u7136\u9ed8\u8ba4\u901a\u8fc7\uff0c\u4f46\u7a0b\u5e8f\u5728main()\u4e2d\u7b2c\u4e00\u6b21\u8c03\u7528foo()\u65f6\u89e6\u53d1\u4e86Segment fault\u5f02\u5e38\u5bfc\u81f4\u5954\u6e83\uff0c\u5728foo.c\u91cc\u4f7f\u7528\u6307\u9488\u6539\u5199\u5b83\u4e5f\u4e00\u6837\u3002<strong>\u63a8\u65ad\u8fd9\u662fGCC\u5bf9const\u5e38\u91cf\u6240\u5728\u5730\u5740\u542f\u7528\u4e86\u7c7b\u4f3c\u64cd\u4f5c\u7cfb\u7edf\u5199\u4fdd\u62a4\u673a\u5236\uff0c\u4f46\u6211\u65e0\u6cd5\u786e\u5b9a\u65e9\u671f\u7248\u672c\u7684GCC\u662f\u5426\u4f1a\u8ba9\u8fd9\u4e2aconst\u5e38\u91cf\u88ab\u6539\u5199\u800c\u7a0b\u5e8f\u4e0d\u4f1a\u5954\u6e83\u3002<\/strong><\/p>\n<p>\u81f3\u4e8e<strong>volatile\u5173\u952e\u8bcd<\/strong>\u4e4b\u4e8e\u5168\u5c40\u53d8\u91cf\uff0c\u81ea\u6d4b\u4f3c\u4e4e\u6ca1\u6709\u5f71\u54cd\u3002<\/p>\n<p>\u600e\u4e48\u6837\uff1f\u770b\u4e86\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u662f\u5426\u6709\u70b9\u201c\u4e0d\u660e\u89c9\u5389\u201d\u5462\uff1fC\u8bed\u8a00\u5728\u4f60\u5fc3\u76ee\u4e2d\u662f\u5426\u8fd8\u662f\u5f53\u521d\u90a3\u4e2a\u201c\u7eaf\u6d01\u201d\u3001\u201c\u5e72\u51c0\u201d\u3001\u201c\u884c\u4e3a\u4e00\u81f4\u201d\u7684\u59d1\u5a18\u5462\uff1f\u4e5f\u8bb8\u8d81\u7740\u4f60\u4e0d\u6ce8\u610f\u7684\u65f6\u5019\u5979\u4f1a\u5077\u5077\u7ed9\u4f60\u6234\u9876\u7eff\u5e3d\uff0c\u8fd9\u4e00\u5207\u90fd\u662f\u901a\u8fc7\u5168\u5c40\u53d8\u91cf\uff0c\u7279\u522b\u5728\u52a8\u6001\u94fe\u63a5\u7684\u73af\u5883\u4e0b\uff0c\u5c31\u7b97\u5168\u90e8\u5b9a\u4e49\u6210\u5f3a\u7b26\u53f7\u4ecd\u7136\u65e0\u6cd5\u4e3a\u7f16\u8bd1\u5668\u6240\u5bdf\u89c9\u3002\u800c\u4e00\u4e9bIT\u754c\u201c\u6050\u6016\u5206\u5b50\u201d\u4e5f\u7ecf\u5e38<strong>\u5c06\u6076\u610f\u4ee3\u7801\u5305\u88c5\u6210\u5168\u5c40\u53d8\u91cf\u6ce8\u5165\u5230root\u6743\u9650\u4e0b\u5b58\u5728\u6f0f\u6d1e\u7684\u64cd\u4f5c\u5e8f\u5217\u4e2d\uff0c<\/strong>\u5c31\u50cf\u8457\u540d\u7684\u6808\u6ea2\u51fa\u653b\u51fb\u90a3\u6837\u3002\u67d0\u4e00\u5929\u5f53\u4f60\u50bb\u50bb\u5730\u770b\u7740\u4e00\u4e2a\u7a0b\u5e8f\u51fa\u73b0\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u5374\u65e0\u6cd5\u5b9a\u4f4d\u539f\u56e0\u7684\u65f6\u5019\uff0c\u8bf7\u4e0d\u8981\u5fd8\u8bb0Richie\u5927\u7237\u90a3\u6765\u81ea\u4e5d\u6cc9\u4e4b\u4e0b\u6700\u6df1\u6c89\u7684\u201c\u95ee\u5019\u201d~<\/p>\n<p>\u6216\u8bb8\u6709\u4e9b\u4eba\u4f1a\u5077\u6362\u6982\u5ff5\uff0c\u628a\u8fd9\u4e00\u5207\u5f52\u548e\u4e8e\u7f16\u8bd1\u5668\u548c\u94fe\u63a5\u5668\u8eab\u4e0a\uff0c\u8ba4\u4e3a\u8fd9\u540c\u8bed\u8a00\u65e0\u5173\uff0c\u4f46\u6211\u8981\u63d0\u9192\u4f60\uff0c\u6b63\u662f\u7f16\u8bd1\/\u94fe\u63a5\u5668\u7684\u884c\u4e3a\u652f\u6491\u4e86\u6574\u4e2a\u8bed\u8a00\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\u3002\u4f60\u53ef\u4ee5\u53cd\u8fc7\u6765\u601d\u8003\u4e00\u4e0b\u4e3a\u4f55C\u7684\u80de\u5f1fC++\u63a8\u51fa<strong>\u201c\u547d\u540d\u7a7a\u95f4(namespace)\u201d<\/strong>\u7684\u6982\u5ff5\uff0c\u6216\u8005\u4f60\u53ef\u4ee5\u4f7f\u7528\u5176\u5b83\u9ad8\u7ea7\u8bed\u8a00\uff0c\u5bf9\u4e8e\u91cd\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf\u662f\u5426\u80fd\u901a\u8fc7\u7f16\u8bd1\u8fd9\u4e00\u5173\u3002<\/p>\n<p>\u6240\u4ee5\u8bf7\u65f6\u523b\u8c28\u8bb0\uff0c<span style=\"color: #ff0000;\"><strong>C\u662f\u4e00\u95e8\u5f88\u6050\u6016\u7684\u8bed\u8a00\uff01<\/strong><\/span><\/p>\n<p>P.S.\u9898\u5916\u8bdd\u5199\u5728\u6700\u540e\u3002\u6211\u65e0\u610f\u6311\u8d77\u8bed\u8a00\u4e4b\u4e89\uff0c\u53ea\u662f\u5c31\u4e8b\u8bba\u4e8b\u5730\u53bb<strong>\u201c\u9ed1(hack)<\/strong><strong>\u201d<\/strong>\u4e00\u95e8\u8bed\u8a00\u800c\u5df2\uff0c\u800c\u4e14\u8981\u9ed1\u5c31\u8981\u9ed1\u5f97\u6709\u7406\u6709\u529b\u6709\u5c42\u6b21\uff0c\u8fd8\u8981\u5e26\u70b9\u5a31\u4e50\u7cbe\u795e\u3002\u5176\u5b9e\u9ed1\u4e00\u95e8\u8bed\u8a00\u5e76\u975e\u4ec0\u4e48\u5c16\u7aef\u590d\u6742\u7684\u6280\u672f\uff0c\u4e2a\u4eba\u89c9\u5f97\u8d77\u7801\u8981\u505a\u5230\u4e24\u70b9\uff1a<\/p>\n<ul>\n<li><strong>\u4eb2\u81ea\u52a8\u624b\u5199\u6d4b\u8bd5\u7a0b\u5e8f\u3002<\/strong>\u52a8\u624b\u5199\u6d4b\u8bd5\u7a0b\u5e8f\u662f\u5f00\u53d1\u4eba\u5458\u5fc5\u5907\u7684\u57fa\u7840\u6280\u80fd\uff0c\u53ea\u6709\u73b0\u6210\u7684\u4ee3\u7801\u624d\u80fd\u8ba9\u4eba\u5fc3\u670d\u53e3\u670d\uff0c\u90a3\u4e9b\u53ea\u4f1a\u505c\u7559\u5728\u53e3\u5934\u4e0a\u7684\u4e89\u8bba\u53ea\u80fd\u7b97\u4f5ccheap hack\u3002<\/li>\n<\/ul>\n<ul>\n<li><strong>\u6d4b\u8bd5\u7a0b\u5e8f\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u4e0d\u6210\u719f\u7684\u4ee3\u7801\u3002<\/strong>\u8f6f\u4ef6\u5f00\u53d199%\u4ee5\u4e0a\u7684bug\u90fd\u662f\u57fa\u4e8e\u4e0d\u5408\u683c(substandard)\u5f00\u53d1\u4eba\u5458\u5bfc\u81f4\uff0c\u8fd9\u5e76\u4e0d\u80fd\u602a\u7f6a\u4e8e\u8bed\u8a00\u4ee5\u53ca\u7f16\u8bd1\u5668\u672c\u8eab\u3002\u4f7f\u7528\u8bf8\u5982#define TRUE FALSE\u6216\u8005#define NULL 1\u4e4b\u7c7b\u7684trick\u6765\u9ed1C\u8bed\u8a00\u53ea\u80fd\u8bc1\u660e\u6b64\u4eba\u5f88\u6709\u5a31\u4e50\u7cbe\u795e\u800c\u4e0d\u662f\u771f\u6b63\u7684&#8221;hack value&#8221;\uff0c\u62ff\u8001\u5317\u4eac\u68a8\u56ed\u884c\u5f53\u91cc\u7684\u4e00\u53e5\u8bdd\u2014\u2014\u201c\u90a3\u662f\u4e0b\u4e09\u6ee5\u7684\u73a9\u610f\u513f\u201d\u3002<\/li>\n<\/ul>\n<p>\uff08\u5168\u6587\u5b8c\uff09<\/p>\n","raw":"","protected":false},"excerpt":{"rendered":"<p>\uff08\u611f\u8c22\u7f51\u53cb\u00a0@\u6211\u7684\u4e0a\u94fa\u53eb\u8def\u9065\u00a0\u6295\u7a3f\uff09 \u4f5c\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\uff0c\u5982\u679c\u8bf4\u6c89\u8ff7\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u7b97\u4f5c\u4e00\u79cd\u4e50\u8da3\u7684\u8bdd\uff0c\u90a3\u4e48\u4e0e\u6b64\u540c\u65f6\u53cd\u8fc7\u6765\u53bb\u9ed1\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u5c31\u662f\u8fd9\u79cd\u4e50\u8da3\u7684\u5347\u534e\u3002\u4eca\u5929\u6211\u4eec\u5c31\u6765&#8230;<\/p>\n<p class=\"read-more\"><a class=\"btn btn-default\" href=\"https:\/\/coolshell.cn\/articles\/10115.html\"> Read More<span class=\"screen-reader-text\">  Read More<\/span><\/a><\/p>\n","protected":false},"author":15168,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[5,20],"tags":[59],"series":[],"aioseo_notices":[],"views":77642,"post_thumbnail_image":"","content_first_image":"","post_medium_image_300":"","post_thumbnail_image_624":"","post_frist_image":"","post_medium_image":"","post_large_image":"","post_full_image":"","post_all_images":[],"videoAdId":"","listAd":"0","listAdId":"","listAdEvery":5,"total_comments":92,"category_name":"C\/C++\u8bed\u8a00","post_date":"2013-07-21","like_count":"0","praiseWord":"\u9f13\u52b1","excitationAd":"0","rewardedVideoAdId":"","detailAdId":"","detailAd":"0","enterpriseMinapp":"0","audios":[],"postImageUrl":"http:\/\/coolshell.cn\/wp-content\/uploads\/2016\/09\/coolshell-360x200.jpg","avatarurls":[],"related_posts":[],"pageviews":77643,"pageviews_wl":24266,"ratings_average":3,"ratings_total":112,"ratings_users":29,"next_post_id":10337,"next_post_title":"\u6570\u636e\u5373\u4ee3\u7801\uff1a\u5143\u9a71\u52a8\u7f16\u7a0b","previous_post_id":9886,"previous_post_title":"\u4e8c\u53c9\u6811\u8fed\u4ee3\u5668\u7b97\u6cd5"}