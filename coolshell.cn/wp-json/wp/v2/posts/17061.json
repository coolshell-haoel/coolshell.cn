{"id":17061,"date":"2015-08-24T08:01:13","date_gmt":"2015-08-24T00:01:13","guid":{"rendered":"http:\/\/coolshell.cn\/?p=17061"},"modified":"2015-08-24T21:58:07","modified_gmt":"2015-08-24T13:58:07","slug":"docker%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%ef%bc%9aaufs","status":"publish","type":"post","link":"https:\/\/coolshell.cn\/articles\/17061.html","title":{"rendered":"Docker\u57fa\u7840\u6280\u672f\uff1aAUFS"},"content":{"rendered":"<p><a href=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png\"><img decoding=\"async\" loading=\"lazy\" class=\"alignright size-medium wp-image-17194\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw-300x225.png\" alt=\"docker-filesystems-busyboxrw\" width=\"300\" height=\"225\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw-300x225.png 300w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw-768x576.png 768w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw-360x270.png 360w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png 800w\" sizes=\"(max-width: 300px) 100vw, 300px\" \/><\/a>AUFS\u662f\u4e00\u79cdUnion File System\uff0c\u6240\u8c13UnionFS\u5c31\u662f\u628a\u4e0d\u540c\u7269\u7406\u4f4d\u7f6e\u7684\u76ee\u5f55\u5408\u5e76mount\u5230\u540c\u4e00\u4e2a\u76ee\u5f55\u4e2d\u3002UnionFS\u7684\u4e00\u4e2a\u6700\u4e3b\u8981\u7684\u5e94\u7528\u662f\uff0c\u628a\u4e00\u5f20CD\/DVD\u548c\u4e00\u4e2a\u786c\u76d8\u76ee\u5f55\u7ed9\u8054\u5408 mount\u5728\u4e00\u8d77\uff0c\u7136\u540e\uff0c\u4f60\u5c31\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u53ea\u8bfb\u7684CD\/DVD\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\uff08\u5f53\u7136\uff0c\u4fee\u6539\u7684\u6587\u4ef6\u5b58\u4e8e\u786c\u76d8\u4e0a\u7684\u76ee\u5f55\u91cc\uff09\u3002<\/p>\n<p>AUFS\u53c8\u53ebAnother UnionFS\uff0c\u540e\u6765\u53ebAlternative UnionFS\uff0c\u540e\u6765\u53ef\u80fd\u89c9\u5f97\u4e0d\u591f\u9738\u6c14\uff0c\u53eb\u6210Advance UnionFS\u3002\u662f\u4e2a\u53ebJunjiro Okajima\uff08\u5ca1\u5cf6\u9806\u6cbb\u90ce\uff09\u57282006\u5e74\u5f00\u53d1\u7684\uff0cAUFS\u5b8c\u5168\u91cd\u5199\u4e86\u65e9\u671f\u7684UnionFS 1.x\uff0c\u5176\u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u4e86\u53ef\u9760\u6027\u548c\u6027\u80fd\uff0c\u5e76\u4e14\u5f15\u5165\u4e86\u4e00\u4e9b\u65b0\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u53ef\u5199\u5206\u652f\u7684\u8d1f\u8f7d\u5747\u8861\u3002AUFS\u5728\u4f7f\u7528\u4e0a\u5168\u517c\u5bb9UnionFS\uff0c\u800c\u4e14\u6bd4\u4e4b\u524d\u7684UnionFS\u5728\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u4e0a\u90fd\u8981\u597d\u5f88\u591a\uff0c\u540e\u6765\u7684UnionFS 2.x\u5f00\u59cb\u6284AUFS\u4e2d\u7684\u529f\u80fd\u3002\u4f46\u662f\u4ed6\u5c45\u7136\u6ca1\u6709\u8fdb\u5230Linux\u4e3b\u5e72\u91cc\uff0c\u5c31\u662f\u56e0\u4e3aLinus\u4e0d\u8ba9\uff0c\u57fa\u672c\u4e0a\u662f\u56e0\u4e3a\u4ee3\u7801\u91cf\u6bd4\u8f83\u591a\uff0c\u800c\u4e14\u5199\u5f97\u70c2\uff08\u76f8\u5bf9\u4e8e\u53ea\u67093000\u884c\u7684union mount\u548c10000\u884c\u7684UnionFS\uff0c\u4ee5\u53ca\u5176\u5b83\u5e73\u5747\u4e0b\u6765\u53ea\u67096000\u884c\u4ee3\u7801\u5de6\u53f3\u7684VFS\uff0cAUFS\u5c45\u7136\u670930000\u884c\u4ee3\u7801\uff09\uff0c\u6240\u4ee5\uff0c\u5ca1\u5cf6\u4e0d\u65ad\u5730\u6539\u8fdb\u4ee3\u7801\u8d28\u91cf\uff0c\u4e0d\u65ad\u5730\u63d0\u4ea4\uff0c\u4e0d\u65ad\u5730\u88abLinus\u62d2\u6389\uff0c\u6240\u4ee5\uff0c\u5230\u4eca\u5929AUFS\u90fd\u8fd8\u8fdb\u4e0d\u4e86Linux\u4e3b\u5e72\uff08\u4eca\u5929\u4f60\u53ef\u4ee5\u770b\u5230AUFS\u7684\u4ee3\u7801\u5176\u5b9e\u8fd8\u597d\u4e86\uff0c\u6bd4\u8d77OpenSSL\u597dN\u500d\uff0c\u8981\u4e48\u5c31\u662fLinus\u5bf9\u4ee3\u7801\u7684\u8d28\u91cf\u8981\u6c42\u975e\u5e38\u9ad8\uff0c\u8981\u4e48\u5c31\u662fLinus\u5c31\u662f\u4e0d\u559c\u6b22AUFS\uff09\u3002<\/p>\n<p>\u4e0d\u8fc7\uff0c\u597d\u5728\u6709\u5f88\u591a\u53d1\u884c\u7248\u90fd\u7528\u4e86AUFS\uff0c\u6bd4\u5982\uff1aUbuntu 10.04\uff0cDebian6.0, Gentoo Live CD\u652f\u6301AUFS\uff0c\u6240\u4ee5\uff0c\u4e5fOK\u4e86\u3002<\/p>\n<p>\u597d\u4e86\uff0c\u626f\u5b8c\u8fd9\u4e9b\u95f2\u8bdd\uff0c\u6211\u4eec\u8fd8\u662f\u770b\u4e00\u4e2a\u793a\u4f8b\u5427\uff08\u73af\u5883\uff1aUbuntu 14.04\uff09<\/p>\n<p><!--more--><\/p>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u5efa\u4e0a\u4e24\u4e2a\u76ee\u5f55\uff08\u6c34\u679c\u548c\u852c\u83dc\uff09\uff0c\u5e76\u5728\u8fd9\u4e24\u4e2a\u76ee\u5f55\u4e2d\u653e\u4e0a\u4e00\u4e9b\u6587\u4ef6\uff0c\u6c34\u679c\u4e2d\u6709\u82f9\u679c\u548c\u8543\u8304\uff0c\u852c\u83dc\u6709\u80e1\u841d\u535c\u548c\u8543\u8304\u3002<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">$ tree\r\n.\r\n\u251c\u2500\u2500 fruits\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 apple\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 tomato\r\n\u2514\u2500\u2500 vegetables\r\n    \u251c\u2500\u2500 carrots\r\n    \u2514\u2500\u2500 tomato\r\n\r\n<\/pre>\n<p>\u7136\u540e\uff0c\u6211\u4eec\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\"># \u521b\u5efa\u4e00\u4e2amount\u76ee\u5f55\r\n$ mkdir mnt\r\n\r\n# \u628a\u6c34\u679c\u76ee\u5f55\u548c\u852c\u83dc\u76ee\u5f55union mount\u5230 .\/mnt\u76ee\u5f55\u4e2d\r\n$ sudo mount -t aufs -o dirs=.\/fruits:.\/vegetables none .\/mnt\r\n\r\n#  \u67e5\u770b.\/mnt\u76ee\u5f55\r\n$ tree .\/mnt\r\n.\/mnt\r\n\u251c\u2500\u2500 apple\r\n\u251c\u2500\u2500 carrots\r\n\u2514\u2500\u2500 tomato<\/pre>\n<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5728.\/mnt\u76ee\u5f55\u4e0b\u6709\u4e09\u4e2a\u6587\u4ef6\uff0c\u82f9\u679capple\u3001\u80e1\u841d\u535ccarrots\u548c\u8543\u8304tomato\u3002\u6c34\u679c\u548c\u852c\u83dc\u7684\u76ee\u5f55\u88abunion\u5230\u4e86.\/mnt\u76ee\u5f55\u4e0b\u4e86\u3002<\/p>\n<p>\u6211\u4eec\u6765\u4fee\u6539\u4e00\u4e0b\u5176\u4e2d\u7684\u6587\u4ef6\u5185\u5bb9\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">$ echo mnt &gt; .\/mnt\/apple\r\n$ cat .\/mnt\/apple\r\nmnt\r\n$ cat .\/fruits\/apple\r\nmnt<\/pre>\n<p>\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230.\/mnt\/apple\u7684\u5185\u5bb9\u6539\u4e86\uff0c.\/fruits\/apple\u7684\u5185\u5bb9\u4e5f\u6539\u4e86\u3002<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">$ echo mnt_carrots &gt; .\/mnt\/carrots\r\n$ cat .\/vegetables\/carrots \r\n\r\n$ cat .\/fruits\/carrots\r\nmnt_carrots\r\n<\/pre>\n<p>\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u4fee\u6539\u4e86.\/mnt\/carrots\u7684\u6587\u4ef6\u5185\u5bb9\uff0c.\/vegetables\/carrots\u5e76\u6ca1\u6709\u53d8\u5316\uff0c\u53cd\u800c\u662f.\/fruits\/carrots\u7684\u76ee\u5f55\u4e2d\u51fa\u73b0\u4e86carrots\u6587\u4ef6\uff0c\u5176\u5185\u5bb9\u662f\u6211\u4eec\u5728.\/mnt\/carrots\u91cc\u7684\u5185\u5bb9\u3002<\/p>\n<p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5728mount aufs\u547d\u4ee4\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u6307\u5b83vegetables\u548cfruits\u7684\u76ee\u5f55\u6743\u9650\uff0c\u9ed8\u8ba4\u4e0a\u6765\u8bf4\uff0c\u547d\u4ee4\u884c\u4e0a\u7b2c\u4e00\u4e2a\uff08\u6700\u5de6\u8fb9\uff09\u7684\u76ee\u5f55\u662f\u53ef\u8bfb\u53ef\u5199\u7684\uff0c\u540e\u9762\u7684\u5168\u90fd\u662f\u53ea\u8bfb\u7684\u3002\uff08\u4e00\u822c\u6765\u8bf4\uff0c\u6700\u524d\u9762\u7684\u76ee\u5f55\u5e94\u8be5\u662f\u53ef\u5199\u7684\uff0c\u800c\u540e\u9762\u7684\u90fd\u5e94\u8be5\u662f\u53ea\u8bfb\u7684\uff09<\/p>\n<p>\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u50cf\u4e0b\u9762\u8fd9\u6837\u6307\u5b9a\u6743\u9650\u6765mount aufs\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\u6709\u4e0d\u4e00\u6837\u7684\u6548\u679c\uff08\u8bb0\u5f97\u5148\u628a\u4e0a\u9762.\/fruits\/carrots\u7684\u6587\u4ef6\u5220\u9664\u4e86\uff09\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">$ sudo mount -t aufs -o dirs=.\/fruits=rw:.\/vegetables=rw none .\/mnt\r\n\r\n$ echo &quot;mnt_carrots&quot; &gt; .\/mnt\/carrots \r\n\r\n$ cat .\/vegetables\/carrots\r\nmnt_carrots\r\n\r\n$ cat .\/fruits\/carrots\r\ncat: .\/fruits\/carrots: No such file or directory<\/pre>\n<p>\u73b0\u5728\uff0c\u5728\u8fd9\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u8981\u4fee\u6539.\/mnt\/tomato\u8fd9\u4e2a\u6587\u4ef6\uff0c\u90a3\u4e48\u7a76\u7adf\u662f\u54ea\u4e2a\u6587\u4ef6\u4f1a\u88ab\u6539\u5199\uff1f<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">$ echo &quot;mnt_tomato&quot; &gt; .\/mnt\/tomato \r\n\r\n$ cat .\/fruits\/tomato\r\nmnt_tomato\r\n\r\n$ cat .\/vegetables\/tomato\r\nI am a vegetable<\/pre>\n<p>\u53ef\u89c1\uff0c\u5982\u679c\u6709\u91cd\u590d\u7684\u6587\u4ef6\u540d\uff0c\u5728mount\u547d\u4ee4\u884c\u4e0a\uff0c\u8d8a\u5f80\u524d\u7684\u5c31\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002<\/p>\n<p>\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e2a\u4f8b\u5b50\u505a\u4e00\u4e9b\u5404\u79cd\u5404\u6837\u7684\u8bd5\u9a8c\uff0c\u6211\u8fd9\u91cc\u4e3b\u8981\u662f\u7ed9\u5927\u5bb6\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\uff0c\u5c31\u4e0d\u5c55\u5f00\u8bd5\u9a8c\u4e0b\u53bb\u4e86\u3002<\/p>\n<p>\u90a3\u4e48\uff0c\u8fd9\u79cdUnionFS\u6709\u4ec0\u4e48\u7528\uff1f<\/p>\n<p>\u5386\u53f2\u4e0a\uff0c\u6709\u4e00\u4e2a\u53eb<a href=\"http:\/\/zh.wikipedia.org\/wiki\/Knoppix\" target=\"_blank\">Knoppix\u7684Linux\u53d1\u884c\u7248<\/a>\uff0c\u5176\u4e3b\u8981\u7528\u4e8eLinux\u6f14\u793a\u3001\u5149\u76d8\u6559\u5b66\u3001\u7cfb\u7edf\u6025\u6551\uff0c\u4ee5\u53ca\u5546\u4e1a\u4ea7\u54c1\u7684\u6f14\u793a\uff0c\u4e0d\u9700\u8981\u786c\u76d8\u5b89\u88c5\uff0c\u76f4\u63a5\u628aCD\/DVD\u4e0a\u7684image\u8fd0\u884c\u5728\u4e00\u4e2a\u53ef\u5199\u7684\u5b58\u50a8\u8bbe\u5907\u4e0a\uff08\u6bd4\u5982\u4e00\u4e2aU\u76d8\u4e0a\uff09\uff0c\u5176\u5b9e\uff0c\u4e5f\u5c31\u662f\u628aCD\/DVD\u8fd9\u4e2a\u6587\u4ef6\u7cfb\u7edf\u548cUSB\u8fd9\u4e2a\u53ef\u5199\u7684\u7cfb\u7edf\u7ed9\u8054\u5408mount\u8d77\u6765\uff0c\u8fd9\u6837\u4f60\u5bf9CD\/DVD\u4e0a\u7684image\u505a\u7684\u4efb\u4f55\u6539\u52a8\u90fd\u4f1a\u5728\u88ab\u5e94\u7528\u5728U\u76d8\u4e0a\uff0c\u4e8e\u662f\u4e4e\uff0c\u4f60\u53ef\u4ee5\u5bf9CD\/DVD\u4e0a\u7684\u5185\u5bb9\u8fdb\u884c\u4efb\u610f\u7684\u4fee\u6539\uff0c\u56e0\u4e3a\u6539\u52a8\u90fd\u5728U\u76d8\u4e0a\uff0c\u6240\u4ee5\u4f60\u6539\u4e0d\u574f\u539f\u6765\u7684\u4e1c\u897f\u3002<\/p>\n<p>\u6211\u4eec\u53ef\u4ee5\u518d\u53d1\u6325\u4e00\u4e0b\u60f3\u50cf\u529b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u628a\u4e00\u4e2a\u76ee\u5f55\uff0c\u6bd4\u5982\u4f60\u7684\u6e90\u4ee3\u7801\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u53ea\u8bfb\u7684template\uff0c\u548c\u53e6\u4e00\u4e2a\u4f60\u7684working directory\u7ed9union\u5728\u4e00\u8d77\uff0c\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u505a\u5404\u79cd\u4fee\u6539\u800c\u4e0d\u7528\u5bb3\u6015\u4f1a\u628a\u6e90\u4ee3\u7801\u6539\u574f\u4e86\u3002\u6709\u70b9\u50cf\u4e00\u4e2aad hoc snapshot\u3002<\/p>\n<p>Docker\u628aUnionFS\u7684\u60f3\u50cf\u529b\u53d1\u6325\u5230\u4e86\u5bb9\u5668\u7684\u955c\u50cf\u3002\u4f60\u662f\u5426\u8fd8\u8bb0\u5f97\u6211\u5728<a title=\"Docker\u57fa\u7840\u6280\u672f\uff1aLinux Namespace\uff08\u4e0a\uff09\" href=\"https:\/\/coolshell.cn\/articles\/17010.html\" target=\"_blank\">\u4ecb\u7ecdLinux Namespace\u4e0a\u7bc7<\/a>\u4e2d\u7528mount namespace\u548cchroot\u5c71\u5be8\u4e86\u4e00\u955c\u50cf\u3002\u73b0\u5728\u5f53\u4f60\u770b\u8fc7\u4e86\u8fd9\u4e2aUnionFS\u7684\u6280\u672f\u540e\uff0c\u4f60\u662f\u4e0d\u662f\u5c31\u660e\u767d\u4e86\uff0c\u4f60\u5b8c\u5168\u53ef\u4ee5\u7528UnionFS\u8fd9\u6837\u7684\u6280\u672f\u505a\u51fa\u5206\u5c42\u7684\u955c\u50cf\u6765\u3002<\/p>\n<p>\u4e0b\u56fe\u6765\u81eaDocker\u7684\u5b98\u65b9\u6587\u6863<a href=\"http:\/\/docs.docker.com\/terms\/layer\/\" target=\"_blank\">Layer<\/a>\uff0c\u5176\u5f88\u597d\u7684\u5c55\u793a\u4e86Docker\u7528UnionFS\u642d\u5efa\u7684\u5206\u5c42\u955c\u50cf\u3002<\/p>\n<p><img decoding=\"async\" loading=\"lazy\" class=\"aligncenter size-full wp-image-17064\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/04\/docker-filesystems-multilayer.png\" alt=\"docker-filesystems-multilayer\" width=\"500\" height=\"375\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/04\/docker-filesystems-multilayer.png 800w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/04\/docker-filesystems-multilayer-300x225.png 300w\" sizes=\"(max-width: 500px) 100vw, 500px\" \/><\/p>\n<p>\u5173\u4e8edocker\u7684\u5206\u5c42\u955c\u50cf\uff0c\u9664\u4e86aufs\uff0cdocker\u8fd8\u652f\u6301btrfs, devicemapper\u548cvfs\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 -s \u6216 &#8211;storage-driver= \u9009\u9879\u6765\u6307\u5b9a\u76f8\u5173\u7684\u955c\u50cf\u5b58\u50a8\u3002\u5728Ubuntu 14.04\u4e0b\uff0cdocker\u9ed8\u8ba4Ubuntu\u7684 aufs\uff08\u5728CentOS7\u4e0b\uff0c\u7528\u7684\u662fdevicemapper\uff0c\u5173\u4e8edevicemapper\uff0c\u6211\u4f1a\u4ee5\u4ee5\u540e\u7684\u6587\u7ae0\u4e2d\u8bb2\u89e3\uff09\u4f60\u53ef\u4ee5\u5728\u4e0b\u9762\u7684\u76ee\u5f55\u4e2d\u67e5\u770b\u76f8\u5173\u7684\u6bcf\u4e2a\u5c42\u7684\u955c\u50cf\uff1a<\/p>\n<p><code data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\/var\/lib\/docker\/aufs\/diff\/&lt;id&gt; <\/code><\/p>\n<p>\u5728docker\u6267\u884c\u8d77\u6765\u540e\uff08\u6bd4\u5982\uff1adocker run -it ubuntu \/bin\/bash \uff09\uff0c\u4f60\u53ef\u4ee5\u4ece\/sys\/fs\/aufs\/si_[id]\u76ee\u5f55\u4e0b\u67e5\u770baufs\u7684mount\u7684\u60c5\u51b5\uff0c\u4e0b\u9762\u662f\u4e2a\u793a\u4f8b\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">#ls \/sys\/fs\/aufs\/si_b71b209f85ff8e75\/\r\nbr0      br2      br4      br6      brid1    brid3    brid5    xi_path\r\nbr1      br3      br5      brid0    brid2    brid4    brid6 \r\n\r\n# cat \/sys\/fs\/aufs\/si_b71b209f85ff8e75\/*\r\n\/var\/lib\/docker\/aufs\/diff\/87315f1367e5703f599168d1e17528a0500bd2e2df7d2fe2aaf9595f3697dbd7=rw\r\n\/var\/lib\/docker\/aufs\/diff\/87315f1367e5703f599168d1e17528a0500bd2e2df7d2fe2aaf9595f3697dbd7-init=ro+wh\r\n\/var\/lib\/docker\/aufs\/diff\/d0955f21bf24f5bfffd32d2d0bb669d0564701c271bc3dfc64cfc5adfdec2d07=ro+wh\r\n\/var\/lib\/docker\/aufs\/diff\/9fec74352904baf5ab5237caa39a84b0af5c593dc7cc08839e2ba65193024507=ro+wh\r\n\/var\/lib\/docker\/aufs\/diff\/a1a958a248181c9aa6413848cd67646e5afb9797f1a3da5995c7a636f050f537=ro+wh\r\n\/var\/lib\/docker\/aufs\/diff\/f3c84ac3a0533f691c9fea4cc2ceaaf43baec22bf8d6a479e069f6d814be9b86=ro+wh\r\n\/var\/lib\/docker\/aufs\/diff\/511136ea3c5a64f264b78b5433614aec563103b4d4702f3ba7d4d2698e22c158=ro+wh\r\n64\r\n65\r\n66\r\n67\r\n68\r\n69\r\n70\r\n\/run\/shm\/aufs.xino<\/pre>\n<p>\u4f60\u4f1a\u770b\u5230\u53ea\u6709\u6700\u9876\u4e0a\u7684\u5c42\uff08branch\uff09\u662frw\u6743\u9650\uff0c\u5176\u5b83\u7684\u90fd\u662fro+wh\u6743\u9650\u53ea\u8bfb\u7684\u3002<\/p>\n<p>\u5173\u4e8edocker\u7684aufs\u7684\u914d\u7f6e\uff0c\u4f60\u53ef\u4ee5\u5728\/var\/lib\/docker\/repositories-aufs\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u770b\u5230\u3002<\/p>\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_48 counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">\u76ee\u5f55<\/p>\n<span class=\"ez-toc-title-toggle\"><\/span><\/div>\n<nav><ul class='ez-toc-list ez-toc-list-level-1 ' ><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\/#AUFS%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%80%A7\" title=\"AUFS\u7684\u4e00\u4e9b\u7279\u6027\">AUFS\u7684\u4e00\u4e9b\u7279\u6027<\/a><ul class='ez-toc-list-level-5'><li class='ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\/#%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD\" title=\"\u76f8\u5173\u672f\u8bed\">\u76f8\u5173\u672f\u8bed<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\/#%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98\" title=\"\u76f8\u5173\u95ee\u9898\">\u76f8\u5173\u95ee\u9898<\/a><\/li><\/ul><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\/#AUFS%E7%9A%84%E6%80%A7%E8%83%BD\" title=\"AUFS\u7684\u6027\u80fd\">AUFS\u7684\u6027\u80fd<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-5\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\/#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB\" title=\"\u5ef6\u4f38\u9605\u8bfb\">\u5ef6\u4f38\u9605\u8bfb<\/a><\/li><\/ul><\/nav><\/div>\n<h4><span class=\"ez-toc-section\" id=\"AUFS%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%80%A7\"><\/span>AUFS\u7684\u4e00\u4e9b\u7279\u6027<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>AUFS\u6709\u6240\u6709Union FS\u7684\u7279\u6027\uff0c\u628a\u591a\u4e2a\u76ee\u5f55\uff0c\u5408\u5e76\u6210\u540c\u4e00\u4e2a\u76ee\u5f55\uff0c\u5e76\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u9700\u8981\u5408\u5e76\u7684\u76ee\u5f55\u6307\u5b9a\u76f8\u5e94\u7684\u6743\u9650\uff0c\u5b9e\u65f6\u7684\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4fee\u6539\u5df2\u7ecf\u88abmount\u597d\u7684\u76ee\u5f55\u3002\u800c\u4e14\uff0c\u4ed6\u8fd8\u80fd\u5728\u591a\u4e2a\u53ef\u5199\u7684branch\/dir\u95f4\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u3002<\/p>\n<p>\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u5df2\u7ecf\u770b\u5230AUFS\u7684mount\u7684\u793a\u4f8b\u4e86\u3002\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u770b\u88abunion\u7684\u76ee\u5f55\uff08\u5206\u652f\uff09\u7684\u76f8\u5173\u6743\u9650\uff1a<\/p>\n<ul>\n<li>rw\u8868\u793a\u53ef\u5199\u53ef\u8bfbread-write\u3002<\/li>\n<li>ro\u8868\u793aread-only\uff0c\u5982\u679c\u4f60\u4e0d\u6307\u6743\u9650\uff0c\u90a3\u4e48\u9664\u4e86\u7b2c\u4e00\u4e2a\u5916ro\u662f\u9ed8\u8ba4\u503c\uff0c\u5bf9\u4e8ero\u5206\u652f\uff0c\u5176\u6c38\u8fdc\u4e0d\u4f1a\u6536\u5230\u5199\u64cd\u4f5c\uff0c\u4e5f\u4e0d\u4f1a\u6536\u5230\u67e5\u627ewhiteout\u7684\u64cd\u4f5c\u3002<\/li>\n<li>rr\u8868\u793areal-read-only\uff0c\u4e0eread-only\u4e0d\u540c\u7684\u662f\uff0crr\u6807\u8bb0\u7684\u662f\u5929\u751f\u5c31\u662f\u53ea\u8bfb\u7684\u5206\u652f\uff0c\u8fd9\u6837\uff0cAUFS\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\uff0c\u6bd4\u5982\u4e0d\u518d\u8bbe\u7f6einotify\u6765\u68c0\u67e5\u6587\u4ef6\u53d8\u52a8\u901a\u77e5\u3002<\/li>\n<\/ul>\n<p>\u6743\u9650\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u4e86\u4e00\u4e2a\u672f\u8bed\uff1awhiteout\uff0c\u4e0b\u9762\u6211\u6765\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u672f\u8bed\u3002<\/p>\n<p>\u4e00\u822c\u6765\u8bf4ro\u7684\u5206\u652f\u90fd\u4f1a\u6709wh\u7684\u5c5e\u6027\uff0c\u6bd4\u5982 &#8220;[dir]=ro+wh&#8221;\u3002\u6240\u8c13whiteout\u7684\u610f\u601d\uff0c\u5982\u679c\u5728union\u4e2d\u5220\u9664\u7684\u67d0\u4e2a\u6587\u4ef6\uff0c\u5b9e\u9645\u4e0a\u662f\u4f4d\u4e8e\u4e00\u4e2areadonly\u7684\u5206\u652f\uff08\u76ee\u5f55\uff09\u4e0a\uff0c\u90a3\u4e48\uff0c\u5728mount\u7684union\u8fd9\u4e2a\u76ee\u5f55\u4e2d\u4f60\u5c06\u770b\u4e0d\u5230\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4f46\u662fread-only\u8fd9\u4e2a\u5c42\u4e0a\u6211\u4eec\u65e0\u6cd5\u505a\u4efb\u4f55\u7684\u4fee\u6539\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5bf9\u8fd9\u4e2areadonly\u76ee\u5f55\u91cc\u7684\u6587\u4ef6\u4f5cwhiteout\u3002AUFS\u7684whiteout\u7684\u5b9e\u73b0\u662f\u901a\u8fc7\u5728\u4e0a\u5c42\u7684\u53ef\u5199\u7684\u76ee\u5f55\u4e0b\u5efa\u7acb\u5bf9\u5e94\u7684whiteout\u9690\u85cf\u6587\u4ef6\u6765\u5b9e\u73b0\u7684\u3002<\/p>\n<p>\u770b\u4e2a\u4f8b\u5b50\uff1a<\/p>\n<p>\u5047\u8bbe\u6211\u4eec\u6709\u4e09\u4e2a\u76ee\u5f55\u548c\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff08test\u662f\u4e2a\u7a7a\u76ee\u5f55\uff09\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\"># tree\r\n.\r\n\u251c\u2500\u2500 fruits\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 apple\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 tomato\r\n\u251c\u2500\u2500 test\r\n\u2514\u2500\u2500 vegetables\r\n    \u251c\u2500\u2500 carrots\r\n    \u2514\u2500\u2500 tomato<\/pre>\n<p>\u6211\u4eec\u5982\u4e0bmount\uff1a<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\"># mkdir mnt\r\n\r\n# mount -t aufs -o dirs=.\/test=rw:.\/fruits=ro:.\/vegetables=ro none .\/mnt\r\n\r\n# # ls .\/mnt\/\r\napple  carrots  tomato <\/pre>\n<p>\u73b0\u5728\u6211\u4eec\u5728\u6743\u9650\u4e3arw\u7684test\u76ee\u5f55\u4e0b\u5efa\u4e2awhiteout\u7684\u9690\u85cf\u6587\u4ef6.wh.apple\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0.\/mnt\/apple\u8fd9\u4e2a\u6587\u4ef6\u5c31\u6d88\u5931\u4e86:<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\"> # touch .\/test\/.wh.apple\r\n\r\n# ls .\/mnt\r\ncarrots  tomato<\/pre>\n<p>\u4e0a\u9762\u8fd9\u4e2a\u64cd\u4f5c\u548c rm .\/mnt\/apple\u662f\u4e00\u6837\u7684\u3002<\/p>\n<h5><span class=\"ez-toc-section\" id=\"%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD\"><\/span>\u76f8\u5173\u672f\u8bed<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u009a<b>Branch<\/b> \u2013 \u5c31\u662f\u5404\u4e2a\u8981\u88abunion\u8d77\u6765\u7684\u76ee\u5f55\uff08\u5c31\u662f\u6211\u5728\u4e0a\u9762\u4f7f\u7528\u7684dirs\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff09<\/p>\n<ul>\n<li>\u009aBranch\u6839\u636e\u88abunion\u7684\u987a\u5e8f\u5f62\u6210\u4e00\u4e2astack\uff0c\u4e00\u822c\u6765\u8bf4\u6700\u4e0a\u9762\u7684\u662f\u53ef\u5199\u7684\uff0c\u4e0b\u9762\u7684\u90fd\u662f\u53ea\u8bfb\u7684\u3002<\/li>\n<li>\u009aBranch\u7684stack\u53ef\u4ee5\u5728\u88abmount\u540e\u8fdb\u884c\u4fee\u6539\uff0c\u6bd4\u5982\uff1a\u4fee\u6539\u987a\u5e8f\uff0c\u52a0\u5165\u65b0\u7684branch\uff0c\u6216\u662f\u5220\u9664\u5176\u4e2d\u7684branch\uff0c\u6216\u662f\u76f4\u63a5\u4fee\u6539branch\u7684\u6743\u9650<\/li>\n<\/ul>\n<p>\u009a<b>Whiteout<\/b>\u00a0\u548c <b>Opaque<\/b><\/p>\n<ul>\n<li>\u009a\u5982\u679cUnionFS\u4e2d\u7684\u67d0\u4e2a\u76ee\u5f55\u88ab\u5220\u9664\u4e86\uff0c\u90a3\u4e48\u5c31\u5e94\u8be5\u4e0d\u53ef\u89c1\u4e86\uff0c\u5c31\u7b97\u662f\u5728\u5e95\u5c42\u7684branch\u4e2d\u8fd8\u6709\u8fd9\u4e2a\u76ee\u5f55\uff0c\u90a3\u4e5f\u5e94\u8be5\u4e0d\u53ef\u89c1\u4e86\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u009aWhiteout\u5c31\u662f\u67d0\u4e2a\u4e0a\u5c42\u76ee\u5f55\u8986\u76d6\u4e86\u4e0b\u5c42\u7684\u76f8\u540c\u540d\u5b57\u7684\u76ee\u5f55\u3002\u7528\u4e8e\u9690\u85cf\u4f4e\u5c42\u5206\u652f\u7684\u6587\u4ef6\uff0c\u4e5f\u7528\u4e8e\u963b\u6b62readdir\u8fdb\u5165\u4f4e\u5c42\u5206\u652f\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u009aOpaque\u7684\u610f\u601d\u5c31\u662f\u4e0d\u5141\u8bb8\u4efb\u4f55\u4e0b\u5c42\u7684\u67d0\u4e2a\u76ee\u5f55\u663e\u793a\u51fa\u6765\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u009a\u5728\u9690\u85cf\u4f4e\u5c42\u6863\u7684\u60c5\u51b5\u4e0b\uff0cwhiteout\u7684\u540d\u5b57\u662f\u2019.wh.&lt;filename&gt;\u2019\u3002<\/li>\n<\/ul>\n<ul>\n<li>\u009a\u5728\u963b\u6b62readdir\u7684\u60c5\u51b5\u4e0b\uff0c\u540d\u5b57\u662f\u2019.wh..wh..opq\u2019\u6216\u8005 \u2019.wh.__dir_opaque\u2019\u3002<\/li>\n<\/ul>\n<h5><span class=\"ez-toc-section\" id=\"%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98\"><\/span>\u76f8\u5173\u95ee\u9898<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u770b\u5230\u4e0a\u9762\u8fd9\u4e9b\uff0c\u4f60\u4e00\u5b9a\u4f1a\u6709\u51e0\u4e2a\u95ee\u9898\uff1a<\/p>\n<p><strong>\u5176\u4e00\u3001\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u8981\u6709\u6587\u4ef6\u5728\u539f\u6765\u7684\u5730\u65b9\u88ab\u4fee\u6539\u4e86\u4f1a\u600e\u4e48\u6837\uff1f<\/strong>mount\u7684\u76ee\u5f55\u4f1a\u4e00\u8d77\u6539\u53d8\u5417\uff1f\u7b54\u6848\u662f\u4f1a\u7684\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e0d\u4f1a\u7684\u3002\u56e0\u4e3a\u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u53ebudba\u7684\u53c2\u6570\uff08\u5168\u79f0\uff1aUser\u2019s Direct Branch Access\uff09\uff0c\u8fd9\u4e2a\u53c2\u6570\u6709\u4e09\u4e2a\u53d6\u503c\uff1a<\/p>\n<ul>\n<li><strong>udba=none<\/strong> \u2013 \u8bbe\u7f6e\u4e0a\u8fd9\u4e2a\u53c2\u6570\u540e\uff0cAUFS\u4f1a\u8fd0\u8f6c\u7684\u66f4\u5feb\uff0c\u56e0\u4e3a\u90a3\u4e9b\u4e0d\u5728mount\u76ee\u5f55\u91cc\u53d1\u751f\u7684\u4fee\u6539\uff0caufs\u4e0d\u4f1a\u540c\u6b65\u8fc7\u6765\u4e86\uff0c\u6240\u4ee5\u4f1a\u6709\u6570\u636e\u51fa\u9519\u7684\u95ee\u9898\u3002<\/li>\n<li><strong>udba=reval<\/strong> \u2013 \u8bbe\u7f6e\u4e0a\u8fd9\u4e2a\u53c2\u6570\u540e\uff0cAUFS\u4f1a\u53bb\u67e5\u6587\u4ef6\u6709\u6ca1\u6709\u88ab\u66f4\u65b0\uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u4f1a\u628a\u4fee\u6539\u62c9\u5230mount\u76ee\u5f55\u5185\u3002<\/li>\n<li><strong>udba=notify<\/strong> \u2013 \u8fd9\u4e2a\u53c2\u6570\u4f1a\u8ba9AUFS\u4e3a\u6240\u6709\u7684branch\u6ce8\u518cinotify\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9AUFS\u5728\u66f4\u65b0\u6587\u4ef6\u4fee\u6539\u7684\u6027\u80fd\u66f4\u9ad8\u4e00\u4e9b\u3002<\/li>\n<\/ul>\n<p><strong>\u5176\u4e8c\u3001\u5982\u679c\u6709\u591a\u4e2arw\u7684branch\uff08\u76ee\u5f55\uff09\u88abunion\u8d77\u6765\u4e86\uff0c\u90a3\u4e48\uff0c\u5f53\u6211\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u5019\uff0caufs\u4f1a\u521b\u5efa\u5728\u54ea\u91cc\u5462\uff1f<\/strong> aufs\u63d0\u4f9b\u4e86\u4e00\u4e2a\u53ebcreate\u7684\u53c2\u6570\u53ef\u4ee5\u4f9b\u4f60\u6765\u914d\u7f6e\u76f8\u5f53\u7684\u521b\u5efa\u7b56\u7565\uff0c\u4e0b\u9762\u6709\u51e0\u4e2a\u4f8b\u5b50\u3002<\/p>\n<p><strong>create=rr | round\u2212robin<\/strong> \u8f6e\u8be2\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u53ef\u4ee5\u770b\u5230\uff0c\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u8f6e\u6d41\u5199\u5230\u4e09\u4e2a\u76ee\u5f55\u4e2d<\/p>\n<pre data-enlighter-language=\"shell\" class=\"EnlighterJSRAW\">\r\nhchen$ sudo mount -t aufs  -o dirs=.\/1=rw:.\/2=rw:.\/3=rw -o create=rr none .\/mnt\r\nhchen$ touch .\/mnt\/a .\/mnt\/b .\/mnt\/c\r\nhchen$ tree\r\n.\r\n\u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 a\r\n\u251c\u2500\u2500 2\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 c\r\n\u2514\u2500\u2500 3\r\n \u00a0\u00a0 \u2514\u2500\u2500 b<\/pre>\n<p><strong>create=mfs[:second] | most\u2212free\u2212space[:second]<\/strong> \u9009\u4e00\u4e2a\u53ef\u7528\u7a7a\u95f4\u6700\u597d\u7684\u5206\u652f\u3002\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u68c0\u67e5\u53ef\u7528\u78c1\u76d8\u7a7a\u95f4\u7684\u65f6\u95f4\u3002<\/p>\n<p><strong>create=mfsrr:low[:second]<\/strong> \u9009\u4e00\u4e2a\u7a7a\u95f4\u5927\u4e8elow\u7684branch\uff0c\u5982\u679c\u7a7a\u95f4\u5c0f\u4e8elow\u4e86\uff0c\u90a3\u4e48aufs\u4f1a\u4f7f\u7528 round-robin \u65b9\u5f0f\u3002<\/p>\n<p>\u66f4\u591a\u7684\u5173\u4e8eAUFS\u7684\u7ec6\u8282\u4f7f\u7528\u53c2\u6570\uff0c\u5927\u5bb6\u53ef\u4ee5\u76f4\u63a5\u5728Ubuntu 14.04\u4e0b\u901a\u8fc7<a href=\"http:\/\/aufs.sourceforge.net\/aufs3\/man.html\" target=\"_blank\"> man aufs <\/a>\u6765\u770b\u4e00\u4e0b\u5176\u4e2d\u7684\u5404\u79cd\u53c2\u6570\u548c\u547d\u4ee4\u3002<\/p>\n<h4><span class=\"ez-toc-section\" id=\"AUFS%E7%9A%84%E6%80%A7%E8%83%BD\"><\/span>AUFS\u7684\u6027\u80fd<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>AUFS\u7684\u6027\u80fd\u6162\u5417\uff1f\u4e5f\u6162\u4e5f\u4e0d\u6162\u3002\u56e0\u4e3aAUFS\u4f1a\u628a\u6240\u6709\u7684\u5206\u652fmount\u8d77\u6765\uff0c\u6240\u4ee5\uff0c\u5728\u67e5\u627e\u6587\u4ef6\u4e0a\u662f\u6bd4\u8f83\u6162\u4e86\u3002\u56e0\u4e3a\u5b83\u8981\u904d\u5386\u6240\u6709\u7684branch\u3002\u662f\u4e2aO(n)\u7684\u7b97\u6cd5\uff08\u5f88\u660e\u663e\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u6709\u5f88\u5927\u7684\u6539\u8fdb\u7a7a\u95f4\u7684\uff09\u6240\u4ee5\uff0cbranch\u8d8a\u591a\uff0c\u67e5\u627e\u6587\u4ef6\u7684\u6027\u80fd\u4e5f\u5c31\u8d8a\u6162\u3002\u4f46\u662f\uff0c\u4e00\u65e6AUFS\u627e\u5230\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684inode\uff0c\u90a3\u540e\u4ee5\u540e\u7684\u8bfb\u5199\u548c\u64cd\u4f5c\u539f\u6587\u4ef6\u57fa\u672c\u4e0a\u662f\u4e00\u6837\u7684\u3002<\/p>\n<p>\u6240\u4ee5\uff0c\u5982\u679c\u4f60\u7684\u7a0b\u5e8f\u8dd1\u5728\u5728AUFS\u4e0b\uff0copen\u548cstat\u64cd\u4f5c\u4f1a\u6709\u660e\u663e\u7684\u6027\u80fd\u4e0b\u964d\uff0cbranch\u8d8a\u591a\uff0c\u6027\u80fd\u8d8a\u5dee\uff0c\u4f46\u662f\u5728write\/read\u64cd\u4f5c\u4e0a\uff0c\u6027\u80fd\u6ca1\u6709\u4ec0\u4e48\u53d8\u5316\u3002<\/p>\n<p>IBM\u7684\u7814\u7a76\u4e2d\u5fc3\u5bf9Docker\u7684\u6027\u80fd\u7ed9\u4e86\u4e00\u4efd\u975e\u5e38\u4e0d\u9519\u7684\u6027\u80fd\u62a5\u544a\uff08PDF\uff09\u300a<a href=\"http:\/\/domino.research.ibm.com\/library\/cyberdig.nsf\/papers\/0929052195DD819C85257D2300681E7B\/$File\/rc25482.pdf\" target=\"_blank\">An Updated Performance Comparison of Virtual Machinesand Linux Containers<\/a>\u300b<\/p>\n<p>\u6211\u622a\u4e86\u4e24\u5f20\u56fe\u51fa\u6765\uff0c\u7b2c\u4e00\u5f20\u662f\u987a\u5e8f\u8bfb\u5199\uff0c\u7b2c\u4e8c\u5f20\u662f\u968f\u673a\u8bfb\u5199\u3002\u57fa\u672c\u6ca1\u6709\u4ec0\u4e48\u6027\u80fd\u635f\u5931\u7684\u95ee\u9898\u3002\u800cKVM\u5728\u968f\u673a\u8bfb\u5199\u7684\u60c5\u51b5\u4e5f\u5c31\u6709\u70b9\u6162\u4e86\uff08\u4f46\u662f\uff0c\u5982\u679c\u786c\u76d8\u662fSSD\u7684\u5462\uff1f\uff09<\/p>\n<p><a href=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.seq_.jpg\"><img decoding=\"async\" loading=\"lazy\" class=\"aligncenter size-full wp-image-17191\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.seq_.jpg\" alt=\"\" width=\"368\" height=\"256\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.seq_.jpg 368w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.seq_-300x209.jpg 300w\" sizes=\"(max-width: 368px) 100vw, 368px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p style=\"text-align: center;\"><strong>\u987a\u5e8f\u8bfb\u5199<\/strong><\/p>\n<p><a href=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.rand_.jpg\"><img decoding=\"async\" loading=\"lazy\" class=\"aligncenter size-full wp-image-17190\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.rand_.jpg\" alt=\"\" width=\"363\" height=\"236\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.rand_.jpg 363w, https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.rand_-300x195.jpg 300w\" sizes=\"(max-width: 363px) 100vw, 363px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p style=\"text-align: center;\"><strong>\u968f\u673a\u8bfb\u5199<\/strong><\/p>\n<h4><span class=\"ez-toc-section\" id=\"%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB\"><\/span>\u5ef6\u4f38\u9605\u8bfb<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<ul>\n<li><a href=\"http:\/\/www.linuxjournal.com\/article\/7714\" target=\"_blank\">Introduce UnionFS<\/a><\/li>\n<li><a href=\"http:\/\/lwn.net\/Articles\/325369\/\" target=\"_blank\">Union file systems: Implementations, part I<\/a><\/li>\n<li><a href=\"http:\/\/lwn.net\/Articles\/327738\/\" target=\"_blank\">Union file systems: Implementations, part 2<\/a><\/li>\n<li><a href=\"http:\/\/lwn.net\/Articles\/403012\/\" target=\"_blank\">Another union filesystem approach<\/a><\/li>\n<li><a href=\"http:\/\/lwn.net\/Articles\/324291\/\" target=\"_blank\">Unioning file systems: Architecture, features, and design choices<\/a><\/li>\n<\/ul>\n<p>\uff08\u5168\u6587\u5b8c\uff09<\/p>\n","raw":"","protected":false},"excerpt":{"rendered":"<p>AUFS\u662f\u4e00\u79cdUnion File System\uff0c\u6240\u8c13UnionFS\u5c31\u662f\u628a\u4e0d\u540c\u7269\u7406\u4f4d\u7f6e\u7684\u76ee\u5f55\u5408\u5e76mount\u5230\u540c\u4e00\u4e2a\u76ee\u5f55\u4e2d\u3002UnionFS\u7684\u4e00\u4e2a\u6700\u4e3b\u8981\u7684\u5e94\u7528\u662f\uff0c\u628a&#8230;<\/p>\n<p class=\"read-more\"><a class=\"btn btn-default\" href=\"https:\/\/coolshell.cn\/articles\/17061.html\"> Read More<span class=\"screen-reader-text\">  Read More<\/span><\/a><\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[20,18,10],"tags":[790,781,37,789],"series":[],"aioseo_notices":[],"views":92652,"post_thumbnail_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","content_first_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_medium_image_300":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_thumbnail_image_624":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_frist_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_medium_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_large_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_full_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw.png","post_all_images":[{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker-filesystems-busyboxrw-300x225.png","id":"image0"},{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/04\/docker-filesystems-multilayer.png","id":"image1"},{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.seq_.jpg","id":"image2"},{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2015\/08\/docker.rand_.jpg","id":"image3"}],"videoAdId":"","listAd":"0","listAdId":"","listAdEvery":5,"total_comments":42,"category_name":"Unix\/Linux","post_date":"2015-08-24","like_count":"0","praiseWord":"\u9f13\u52b1","excitationAd":"0","rewardedVideoAdId":"","detailAdId":"","detailAd":"0","enterpriseMinapp":"0","audios":[],"postImageUrl":"http:\/\/coolshell.cn\/wp-content\/uploads\/2016\/09\/coolshell-360x200.jpg","avatarurls":[],"related_posts":[{"ID":"22320","post_title":"eBPF \u4ecb\u7ecd"}],"pageviews":92653,"pageviews_wl":69033,"ratings_average":4,"ratings_total":167,"ratings_users":40,"next_post_id":17200,"next_post_title":"Docker\u57fa\u7840\u6280\u672f\uff1aDeviceMapper","previous_post_id":17049,"previous_post_title":"Docker\u57fa\u7840\u6280\u672f\uff1aLinux CGroup"}