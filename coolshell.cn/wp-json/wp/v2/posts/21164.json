{"id":21164,"date":"2020-12-24T15:13:52","date_gmt":"2020-12-24T07:13:52","guid":{"rendered":"https:\/\/coolshell.cn\/?p=21164"},"modified":"2020-12-28T15:38:22","modified_gmt":"2020-12-28T07:38:22","slug":"go%e7%bc%96%e7%a8%8b%e6%a8%a1%e5%bc%8fmap-reduce","status":"publish","type":"post","link":"https:\/\/coolshell.cn\/articles\/21164.html","title":{"rendered":"Go\u7f16\u7a0b\u6a21\u5f0f\uff1aMap-Reduce"},"content":{"rendered":"<p><img decoding=\"async\" loading=\"lazy\" class=\"alignright size-medium wp-image-21251\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce-300x192.png\" alt=\"\" width=\"300\" height=\"192\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce-300x192.png 300w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce-768x491.png 768w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce-422x270.png 422w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png 992w\" sizes=\"(max-width: 300px) 100vw, 300px\" \/>\u5728\u672c\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u5b66\u4e60\u4e00\u4e0b\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u4e2d\u975e\u5e38\u91cd\u8981\u7684Map\u3001Reduce\u3001Filter\u7684\u4e09\u79cd\u64cd\u4f5c\uff0c\u8fd9\u4e09\u79cd\u64cd\u4f5c\u53ef\u4ee5\u8ba9\u6211\u4eec\u975e\u5e38\u65b9\u4fbf\u7075\u6d3b\u5730\u8fdb\u884c\u4e00\u4e9b\u6570\u636e\u5904\u7406\u2014\u2014\u6211\u4eec\u7684\u7a0b\u5e8f\u4e2d\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u662f\u5728\u5230\u5012\u817e\u6570\u636e\uff0c\u5c24\u5176\u5bf9\u4e8e\u4e00\u4e9b\u9700\u8981\u7edf\u8ba1\u7684\u4e1a\u52a1\u573a\u666f\uff0cMap\/Reduce\/Filter\u662f\u975e\u5e38\u901a\u7528\u7684\u73a9\u6cd5\u3002\u4e0b\u9762\u5148\u6765\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a<\/p>\n<section class=\"post-series\"><h3 class=\"post-series-title\">\u672c\u6587\u662f\u5168\u7cfb\u5217\u4e2d\u7b2c5 \/ 10\u7bc7\uff1a<a href=\"https:\/\/coolshell.cn\/articles\/series\/go%e7%bc%96%e7%a8%8b%e6%a8%a1%e5%bc%8f\">Go\u7f16\u7a0b\u6a21\u5f0f<\/a><\/h3><ul class=\"post-series-list\"><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21128.html\">Go\u7f16\u7a0b\u6a21\u5f0f\uff1a\u5207\u7247\uff0c\u63a5\u53e3\uff0c\u65f6\u95f4\u548c\u6027\u80fd<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21140.html\">Go \u7f16\u7a0b\u6a21\u5f0f\uff1a\u9519\u8bef\u5904\u7406<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21146.html\">Go \u7f16\u7a0b\u6a21\u5f0f\uff1aFunctional Options<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21214.html\">Go\u7f16\u7a0b\u6a21\u5f0f\uff1a\u59d4\u6258\u548c\u53cd\u8f6c\u63a7\u5236<\/a><\/span><\/li><li class=\"post-series-item-current post-series-item\"><span class=\"post-series-item-title\">Go\u7f16\u7a0b\u6a21\u5f0f\uff1aMap-Reduce<\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21179.html\">Go \u7f16\u7a0b\u6a21\u5f0f\uff1aGo Generation<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/17929.html\">Go\u7f16\u7a0b\u6a21\u5f0f\uff1a\u4fee\u9970\u5668<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21228.html\">Go\u7f16\u7a0b\u6a21\u5f0f\uff1aPipeline<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21263.html\">Go \u7f16\u7a0b\u6a21\u5f0f\uff1ak8s Visitor \u6a21\u5f0f<\/a><\/span><\/li><li class=\"post-series-item\"><span class=\"post-series-item-title\"><a href=\"https:\/\/coolshell.cn\/articles\/21615.html\">Go\u7f16\u7a0b\u6a21\u5f0f \uff1a \u6cdb\u578b\u7f16\u7a0b<\/a><\/span><\/li><\/ul><nav class=\"post-series-nav\"><span class=\"post-series-nav-prev\">&laquo; <a href=\"https:\/\/coolshell.cn\/articles\/21214.html\" rel=\"prev\" title=\"Go\u7f16\u7a0b\u6a21\u5f0f\uff1a\u59d4\u6258\u548c\u53cd\u8f6c\u63a7\u5236\">\u4e0a\u4e00\u7bc7\u6587\u7ae0<\/a><\/span><span class=\"post-series-nav-next\"><a href=\"https:\/\/coolshell.cn\/articles\/21179.html\" rel=\"next\" title=\"Go \u7f16\u7a0b\u6a21\u5f0f\uff1aGo Generation\">\u4e0b\u4e00\u7bc7\u6587\u7ae0<\/a> &raquo;<\/span><\/nav><\/section>\n<div id=\"ez-toc-container\" class=\"ez-toc-v2_0_48 counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction\">\n<div class=\"ez-toc-title-container\">\n<p class=\"ez-toc-title\">\u76ee\u5f55<\/p>\n<span class=\"ez-toc-title-toggle\"><\/span><\/div>\n<nav><ul class='ez-toc-list ez-toc-list-level-1 ' ><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-1\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B\" title=\"\u57fa\u672c\u793a\u4f8b\">\u57fa\u672c\u793a\u4f8b<\/a><ul class='ez-toc-list-level-5'><li class='ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-2\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#Map%E7%A4%BA%E4%BE%8B\" title=\"Map\u793a\u4f8b\">Map\u793a\u4f8b<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-3\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#Reduce_%E7%A4%BA%E4%BE%8B\" title=\"Reduce \u793a\u4f8b\">Reduce \u793a\u4f8b<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-4\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#Filter%E7%A4%BA%E4%BE%8B\" title=\"Filter\u793a\u4f8b\">Filter\u793a\u4f8b<\/a><\/li><\/ul><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-5\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E4%B8%9A%E5%8A%A1%E7%A4%BA%E4%BE%8B\" title=\"\u4e1a\u52a1\u793a\u4f8b\">\u4e1a\u52a1\u793a\u4f8b<\/a><ul class='ez-toc-list-level-5'><li class='ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-6\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF\" title=\"\u5458\u5de5\u4fe1\u606f\">\u5458\u5de5\u4fe1\u606f<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-7\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E7%9B%B8%E5%85%B3%E7%9A%84ReduceFitler%E5%87%BD%E6%95%B0\" title=\"\u76f8\u5173\u7684Reduce\/Fitler\u51fd\u6570\">\u76f8\u5173\u7684Reduce\/Fitler\u51fd\u6570<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-8\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%90%84%E7%A7%8D%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%BB%9F%E8%AE%A1%E7%A4%BA%E4%BE%8B\" title=\"\u5404\u79cd\u81ea\u5b9a\u4e49\u7684\u7edf\u8ba1\u793a\u4f8b\">\u5404\u79cd\u81ea\u5b9a\u4e49\u7684\u7edf\u8ba1\u793a\u4f8b<\/a><\/li><\/ul><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-9\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E6%B3%9B%E5%9E%8BMap-Reduce\" title=\"\u6cdb\u578bMap-Reduce\">\u6cdb\u578bMap-Reduce<\/a><ul class='ez-toc-list-level-5'><li class='ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-10\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E7%AE%80%E5%8D%95%E7%89%88_Generic_Map\" title=\"\u7b80\u5355\u7248 Generic Map\">\u7b80\u5355\u7248 Generic Map<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-11\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84Generic_Map\" title=\"\u5065\u58ee\u7248\u7684Generic Map\">\u5065\u58ee\u7248\u7684Generic Map<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-12\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84_Generic_Reduce\" title=\"\u5065\u58ee\u7248\u7684 Generic Reduce\">\u5065\u58ee\u7248\u7684 Generic Reduce<\/a><\/li><li class='ez-toc-page-1 ez-toc-heading-level-5'><a class=\"ez-toc-link ez-toc-heading-13\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84_Generic_Filter\" title=\"\u5065\u58ee\u7248\u7684 Generic Filter\">\u5065\u58ee\u7248\u7684 Generic Filter<\/a><\/li><\/ul><\/li><li class='ez-toc-page-1 ez-toc-heading-level-4'><a class=\"ez-toc-link ez-toc-heading-14\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\/#%E5%90%8E%E8%AE%B0\" title=\"\u540e\u8bb0\">\u540e\u8bb0<\/a><\/li><\/ul><\/nav><\/div>\n<h4><span class=\"ez-toc-section\" id=\"%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B\"><\/span>\u57fa\u672c\u793a\u4f8b<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<h5><span class=\"ez-toc-section\" id=\"Map%E7%A4%BA%E4%BE%8B\"><\/span>Map\u793a\u4f8b<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u4e0b\u9762\u7684\u7a0b\u5e8f\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5199\u4e86\u4e24\u4e2aMap\u51fd\u6570\uff0c\u8fd9\u4e24\u4e2a\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c<\/p>\n<ul>\n<li>\u4e00\u4e2a\u662f\u5b57\u7b26\u4e32\u6570\u7ec4 <code>[]string<\/code>\uff0c\u8bf4\u660e\u9700\u8981\u5904\u7406\u7684\u6570\u636e\u4e00\u4e2a\u5b57\u7b26\u4e32<\/li>\n<li>\u53e6\u4e00\u4e2a\u662f\u4e00\u4e2a\u51fd\u6570<code>func(s string) string<\/code> \u6216 <code>func(s string) int<\/code><\/li>\n<\/ul>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">func MapStrToStr(arr []string, fn func(s string) string) []string {\n    var newArray = []string{}\n    for _, it := range arr {\n        newArray = append(newArray, fn(it))\n    }\n    return newArray\n}\n\nfunc MapStrToInt(arr []string, fn func(s string) int) []int {\n    var newArray = []int{}\n    for _, it := range arr {\n        newArray = append(newArray, fn(it))\n    }\n    return newArray\n}<\/pre>\n<p>\u6574\u4e2aMap\u51fd\u6570\u8fd0\u884c\u903b\u8f91\u90fd\u5f88\u76f8\u4f3c\uff0c\u51fd\u6570\u4f53\u90fd\u662f\u5728\u904d\u5386\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u6570\u7ec4\uff0c\u7136\u540e\uff0c\u8c03\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u51fd\u6570\uff0c\u7136\u540e\u628a\u5176\u503c\u7ec4\u5408\u6210\u53e6\u4e00\u4e2a\u6570\u7ec4\u8fd4\u56de\u3002<\/p>\n<p><!--more--><\/p>\n<p>\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\u8fd9\u4e24\u4e2a\u51fd\u6570\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">var list = []string{\"Hao\", \"Chen\", \"MegaEase\"}\n\nx := MapStrToStr(list, func(s string) string {\n    return strings.ToUpper(s)\n})\nfmt.Printf(\"%v\\n\", x)\n\/\/[\"HAO\", \"CHEN\", \"MEGAEASE\"]\n\ny := MapStrToInt(list, func(s string) int {\n    return len(s)\n})\nfmt.Printf(\"%v\\n\", y)\n\/\/[3, 4, 8]<\/pre>\n<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u7ed9\u7b2c\u4e00\u4e2a <code>MapStrToStr()<\/code> \u4f20\u4e86\u51fd\u6570\u505a\u7684\u662f \u8f6c\u5927\u5199\uff0c\u4e8e\u662f\u51fa\u6765\u7684\u6570\u7ec4\u5c31\u6210\u4e86\u5168\u5927\u5199\u7684\uff0c\u7ed9<code>MapStrToInt()<\/code> \u4f20\u7684\u662f\u7b97\u5176\u957f\u5ea6\uff0c\u6240\u4ee5\u51fa\u6765\u7684\u6570\u7ec4\u662f\u6bcf\u4e2a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002<\/p>\n<p>\u6211\u4eec\u518d\u6765\u770b\u4e00\u4e0bReduce\u548cFilter\u7684\u51fd\u6570\u662f\u4ec0\u4e48\u6837\u7684\u3002<\/p>\n<h5><span class=\"ez-toc-section\" id=\"Reduce_%E7%A4%BA%E4%BE%8B\"><\/span><strong>Reduce \u793a\u4f8b<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h5>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">func Reduce(arr []string, fn func(s string) int) int {\n    sum := 0\n    for _, it := range arr {\n        sum += fn(it)\n    }\n    return sum\n}\n\nvar list = []string{\"Hao\", \"Chen\", \"MegaEase\"}\n\nx := Reduce(list, func(s string) int {\n    return len(s)\n})\nfmt.Printf(\"%v\\n\", x)\n\/\/ 15\n<\/pre>\n<h5><span class=\"ez-toc-section\" id=\"Filter%E7%A4%BA%E4%BE%8B\"><\/span><strong>Filter\u793a\u4f8b<\/strong><span class=\"ez-toc-section-end\"><\/span><\/h5>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">func Filter(arr []int, fn func(n int) bool) []int {\n    var newArray = []int{}\n    for _, it := range arr {\n        if fn(it) {\n            newArray = append(newArray, it)\n        }\n    }\n    return newArray\n}\n\nvar intset = []int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}\nout := Filter(intset, func(n int) bool {\n   return n%2 == 1\n})\nfmt.Printf(\"%v\\n\", out)\n\nout = Filter(intset, func(n int) bool {\n    return n &gt; 5\n})\nfmt.Printf(\"%v\\n\", out)\n<\/pre>\n<p>\u4e0b\u56fe\u662f\u4e00\u4e2a\u6bd4\u55bb\uff0c\u5176\u975e\u5e38\u5f62\u8c61\u5730\u8bf4\u660e\u4e86Map-Reduce\u662f\u7684\u4e1a\u52a1\u8bed\u4e49\uff0c\u5176\u5728\u6570\u636e\u5904\u7406\u4e2d\u975e\u5e38\u6709\u7528\u3002<\/p>\n<p><img decoding=\"async\" loading=\"lazy\" class=\"aligncenter size-full wp-image-21169\" src=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce.png\" alt=\"\" width=\"794\" height=\"442\" srcset=\"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce.png 794w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce-300x167.png 300w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce-768x428.png 768w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce-360x200.png 360w, https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce-485x270.png 485w\" sizes=\"(max-width: 794px) 100vw, 794px\" \/><\/p>\n<h4><span class=\"ez-toc-section\" id=\"%E4%B8%9A%E5%8A%A1%E7%A4%BA%E4%BE%8B\"><\/span>\u4e1a\u52a1\u793a\u4f8b<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>\u901a\u8fc7\u4e0a\u9762\u7684\u4e00\u4e9b\u793a\u4f8b\uff0c\u4f60\u53ef\u80fd\u6709\u4e00\u4e9b\u660e\u767d\uff0cMap\/Reduce\/Filter\u53ea\u662f\u4e00\u79cd\u63a7\u5236\u903b\u8f91\uff0c\u771f\u6b63\u7684\u4e1a\u52a1\u903b\u8f91\u662f\u5728\u4f20\u7ed9\u4ed6\u4eec\u7684\u6570\u636e\u548c\u90a3\u4e2a\u51fd\u6570\u6765\u5b9a\u4e49\u7684\u3002\u662f\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u7ecf\u5178\u7684\u201c\u4e1a\u52a1\u903b\u8f91\u201d\u548c\u201c\u63a7\u5236\u903b\u8f91\u201d\u5206\u79bb\u89e3\u8026\u7684\u7f16\u7a0b\u6a21\u5f0f\u3002\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u6709\u4e1a\u52a1\u610f\u4e49\u7684\u4ee3\u7801\uff0c\u6765\u8ba9\u5927\u5bb6\u5f3a\u5316\u7406\u89e3\u4e00\u4e0b\u4ec0\u4e48\u53eb\u201c\u63a7\u5236\u903b\u8f91\u201d\u4e0e\u4e1a\u52a1\u903b\u8f91\u5206\u79bb\u3002<\/p>\n<h5><span class=\"ez-toc-section\" id=\"%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF\"><\/span>\u5458\u5de5\u4fe1\u606f<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u4e00\u4e2a\u5458\u5de5\u5bf9\u8c61\uff0c\u4ee5\u53ca\u4e00\u4e9b\u6570\u636e<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">type Employee struct {\n    Name \u00a0 \u00a0 string\n    Age\u00a0 \u00a0 \u00a0 int\n    Vacation int\n    Salary \u00a0 int\n}\n\nvar list = []Employee{\n    {\"Hao\", 44, 0, 8000},\n    {\"Bob\", 34, 10, 5000},\n    {\"Alice\", 23, 5, 9000},\n    {\"Jack\", 26, 0, 4000},\n    {\"Tom\", 48, 9, 7500},\n    {\"Marry\", 29, 0, 6000},\n    {\"Mike\", 32, 8, 4000},\n}<\/pre>\n<h5><span class=\"ez-toc-section\" id=\"%E7%9B%B8%E5%85%B3%E7%9A%84ReduceFitler%E5%87%BD%E6%95%B0\"><\/span>\u76f8\u5173\u7684Reduce\/Fitler\u51fd\u6570<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u7136\u540e\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u7684\u51e0\u4e2a\u51fd\u6570\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">func EmployeeCountIf(list []Employee, fn func(e *Employee) bool) int {\n    count := 0\n    for i, _ := range list {\n        if fn(&amp;list[i]) {\n            count += 1\n        }\n    }\n    return count\n}\n\nfunc EmployeeFilterIn(list []Employee, fn func(e *Employee) bool) []Employee {\n    var newList []Employee\n    for i, _ := range list {\n        if fn(&amp;list[i]) {\n            newList = append(newList, list[i])\n        }\n    }\n    return newList\n}\n\nfunc EmployeeSumIf(list []Employee, fn func(e *Employee) int) int {\n    var sum = 0\n    for i, _ := range list {\n        sum += fn(&amp;list[i])\n    }\n    return sum\n}<\/pre>\n<p>\u7b80\u5355\u8bf4\u660e\u4e00\u4e0b\uff1a<\/p>\n<ul>\n<li><code>EmployeeConutIf<\/code> \u548c <code>EmployeeSumIf<\/code> \u5206\u522b\u7528\u4e8e\u7edf\u6ee1\u8db3\u67d0\u4e2a\u6761\u4ef6\u7684\u4e2a\u6570\u6216\u603b\u6570\u3002\u5b83\u4eec\u90fd\u662fFilter + Reduce\u7684\u8bed\u4e49\u3002<\/li>\n<li><code>EmployeeFilterIn<\/code> \u5c31\u662f\u6309\u67d0\u79cd\u6761\u4ef6\u8fc7\u8651\u3002\u5c31\u662fFitler\u7684\u8bed\u4e49\u3002<\/li>\n<\/ul>\n<h5><span class=\"ez-toc-section\" id=\"%E5%90%84%E7%A7%8D%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%BB%9F%E8%AE%A1%E7%A4%BA%E4%BE%8B\"><\/span>\u5404\u79cd\u81ea\u5b9a\u4e49\u7684\u7edf\u8ba1\u793a\u4f8b<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u6709\u5982\u4e0b\u7684\u4ee3\u7801\u3002<\/p>\n<p><strong>1\uff09\u7edf\u8ba1\u6709\u591a\u5c11\u5458\u5de5\u5927\u4e8e40\u5c81<\/strong><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">old := EmployeeCountIf(list, func(e *Employee) bool {\n    return e.Age &gt; 40\n})\nfmt.Printf(\"old people: %d\\n\", old)\n\/\/old people: 2\n<\/pre>\n<p><strong>2\uff09\u7edf\u8ba1\u6709\u591a\u5c11\u5458\u5de5\u85aa\u6c34\u5927\u4e8e6000<\/strong><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">high_pay := EmployeeCountIf(list, func(e *Employee) bool {\n    return e.Salary &gt;= 6000\n})\nfmt.Printf(\"High Salary people: %d\\n\", high_pay)\n\/\/High Salary people: 4\n<\/pre>\n<p><strong>3\uff09\u5217\u51fa\u6709\u6ca1\u6709\u4f11\u5047\u7684\u5458\u5de5<\/strong><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">no_vacation := EmployeeFilterIn(list, func(e *Employee) bool {\n    return e.Vacation == 0\n})\nfmt.Printf(\"People no vacation: %v\\n\", no_vacation)\n\/\/People no vacation: [{Hao 44 0 8000} {Jack 26 0 4000} {Marry 29 0 6000}]\n<\/pre>\n<p><strong>4\uff09\u7edf\u8ba1\u6240\u6709\u5458\u5de5\u7684\u85aa\u8d44\u603b\u548c<\/strong><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">total_pay := EmployeeSumIf(list, func(e *Employee) int {\n    return e.Salary\n})\n\nfmt.Printf(\"Total Salary: %d\\n\", total_pay)\n\/\/Total Salary: 43500\n<\/pre>\n<p><strong>5\uff09\u7edf\u8ba130\u5c81\u4ee5\u4e0b\u5458\u5de5\u7684\u85aa\u8d44\u603b\u548c<\/strong><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">younger_pay := EmployeeSumIf(list, func(e *Employee) int {\n    if e.Age &lt; 30 {\n        return e.Salary\n    } \n    return 0\n})<\/pre>\n<h4><span class=\"ez-toc-section\" id=\"%E6%B3%9B%E5%9E%8BMap-Reduce\"><\/span>\u6cdb\u578bMap-Reduce<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u9762\u7684Map-Reduce\u90fd\u56e0\u4e3a\u8981\u5904\u7406\u6570\u636e\u7684\u7c7b\u578b\u4e0d\u540c\u800c\u9700\u8981\u5199\u51fa\u4e0d\u540c\u7248\u672c\u7684Map-Reduce\uff0c\u867d\u7136\u4ed6\u4eec\u7684\u4ee3\u7801\u770b\u4e0a\u53bb\u662f\u5f88\u7c7b\u4f3c\u7684\u3002\u6240\u4ee5\uff0c\u8fd9\u91cc\u5c31\u8981\u5e26\u51fa\u6765\u6cdb\u578b\u7f16\u7a0b\u4e86\uff0cGo\u8bed\u8a00\u5728\u672c\u6587\u5199\u4f5c\u7684\u65f6\u5019\u8fd8\u4e0d\u652f\u6301\u6cdb\u578b\uff08\u6ce8\uff1aGo\u5f00\u53d1\u56e2\u961f\u6280\u672f\u8d1f\u8d23\u4ebaRuss Cox\u57282012\u5e7411\u670821golang-dev\u4e0a\u7684mail\u786e\u8ba4\u4e86Go\u6cdb\u578b(type parameter)\u5c06\u5728Go 1.18\u7248\u672c\u843d\u5730\uff0c\u53732022.2\u6708\u4efd\uff09\u3002<\/p>\n<h5><span class=\"ez-toc-section\" id=\"%E7%AE%80%E5%8D%95%E7%89%88_Generic_Map\"><\/span>\u7b80\u5355\u7248 Generic Map<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u6240\u4ee5\uff0c\u76ee\u524d\u7684Go\u8bed\u8a00\u7684\u6cdb\u578b\u53ea\u80fd\u7528 <code>interface{}<\/code> + <code>reflect<\/code>\u6765\u5b8c\u6210\uff0c<code>interface{}<\/code> \u53ef\u4ee5\u7406\u89e3\u4e3aC\u4e2d\u7684\u00a0<code>void*<\/code>\uff0cJava\u4e2d\u7684 <code>Object<\/code> \uff0c<code>reflect<\/code>\u662fGo\u7684\u53cd\u5c04\u673a\u5236\u5305\uff0c\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u7c7b\u578b\u3002<\/p>\n<p>\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u4e0d\u4f5c\u4efb\u4f55\u7c7b\u578b\u68c0\u67e5\u7684\u6cdb\u578b\u7684Map\u51fd\u6570\u600e\u4e48\u5199\u3002<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">func Map(data interface{}, fn interface{}) []interface{} {\n    vfn := reflect.ValueOf(fn)\n    vdata := reflect.ValueOf(data)\n    result := make([]interface{}, vdata.Len())\n\n    for i := 0; i &lt; vdata.Len(); i++ {\n        result[i] = vfn.Call([]reflect.Value{vdata.Index(i)})[0].Interface()\n    }\n    return result\n}<\/pre>\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<\/p>\n<ul>\n<li>\u901a\u8fc7 <code>reflect.ValueOf()<\/code> \u6765\u83b7\u5f97 <code>interface{}<\/code> \u7684\u503c\uff0c\u5176\u4e2d\u4e00\u4e2a\u662f\u6570\u636e <code>vdata<\/code>\uff0c\u53e6\u4e00\u4e2a\u662f\u51fd\u6570 <code>vfn<\/code>\uff0c<\/li>\n<li>\u7136\u540e\u901a\u8fc7 <code>vfn.Call()<\/code> \u65b9\u6cd5\u6765\u8c03\u7528\u51fd\u6570\uff0c\u901a\u8fc7 <code>[]refelct.Value{vdata.Index(i)}<\/code>\u6765\u83b7\u5f97\u6570\u636e\u3002<\/li>\n<\/ul>\n<p>Go\u8bed\u8a00\u4e2d\u7684\u53cd\u5c04\u7684\u8bed\u6cd5\u8fd8\u662f\u6709\u70b9\u4ee4\u4eba\u8d39\u89e3\u7684\uff0c\u4f46\u662f\u7b80\u5355\u770b\u4e00\u4e0b\u624b\u518c\u8fd8\u662f\u80fd\u591f\u8bfb\u61c2\u7684\u3002\u6211\u8fd9\u7bc7\u6587\u7ae0\u4e0d\u8bb2\u53cd\u5c04\uff0c\u6240\u4ee5\u76f8\u5173\u7684\u57fa\u7840\u77e5\u8bc6\u8fd8\u8bf7\u5927\u5bb6\u81ea\u884cGoogle\u76f8\u5173\u7684\u6559\u7a0b\u3002<\/p>\n<p>\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6709\u4e0b\u9762\u7684\u4ee3\u7801\u2014\u2014\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u903b\u8f91\u7684<code>Map()<\/code>\u4ee3\u7801\u3002<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">square := func(x int) int {\n  return x * x\n}\nnums := []int{1, 2, 3, 4}\n\nsquared_arr := Map(nums,square)\nfmt.Println(squared_arr)\n\/\/[1 4 9 16]\n\n\n\nupcase := func(s string) string {\n  return strings.ToUpper(s)\n}\nstrs := []string{\"Hao\", \"Chen\", \"MegaEase\"}\nupstrs := Map(strs, upcase);\nfmt.Println(upstrs)\n\/\/[HAO CHEN MEGAEASE]<\/pre>\n<p>\u4f46\u662f\u56e0\u4e3a\u53cd\u5c04\u662f\u8fd0\u884c\u65f6\u7684\u4e8b\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u7c7b\u578b\u4ec0\u4e48\u51fa\u95ee\u9898\u7684\u8bdd\uff0c\u5c31\u4f1a\u6709\u8fd0\u884c\u65f6\u7684\u9519\u8bef\u3002\u6bd4\u5982\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">x := Map(5, 5)\nfmt.Println(x)<\/pre>\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u7f16\u8bd1\u901a\u8fc7\uff0c\u4f46\u662f\u5728\u8fd0\u884c\u65f6\u5c31\u51fa\u95ee\u9898\u4e86\uff0c\u8fd8\u662fpanic\u9519\u8bef\u2026\u2026<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">panic: reflect: call of reflect.Value.Len on int Value\n\ngoroutine 1 [running]:\nreflect.Value.Len(0x10b5240, 0x10eeb58, 0x82, 0x10716bc)\n        \/usr\/local\/Cellar\/go\/1.15.3\/libexec\/src\/reflect\/value.go:1162 +0x185\nmain.Map(0x10b5240, 0x10eeb58, 0x10b5240, 0x10eeb60, 0x1, 0x14, 0x0)\n        \/Users\/chenhao\/...\/map.go:12 +0x16b\nmain.main()\n        \/Users\/chenhao\/...\/map.go:42 +0x465\nexit status 2<\/pre>\n<h5><span class=\"ez-toc-section\" id=\"%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84Generic_Map\"><\/span>\u5065\u58ee\u7248\u7684Generic Map<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u6240\u4ee5\uff0c\u5982\u679c\u8981\u5199\u4e00\u4e2a\u5065\u58ee\u7684\u7a0b\u5e8f\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u7528<code>interface{}<\/code> \u7684\u201c\u8fc7\u5ea6\u6cdb\u578b\u201d\uff0c\u5c31\u9700\u8981\u6211\u4eec\u81ea\u5df1\u6765\u505a\u7c7b\u578b\u68c0\u67e5\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u6709\u7c7b\u578b\u68c0\u67e5\u7684Map\u4ee3\u7801\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">func Transform(slice, function interface{}) interface{} {\n  return transform(slice, function, false)\n}\n\nfunc TransformInPlace(slice, function interface{}) interface{} {\n  return transform(slice, function, true)\n}\n\nfunc transform(slice, function interface{}, inPlace bool) interface{} {\n \n  \/\/check the <code data-enlighter-language=\"raw\" class=\"EnlighterJSRAW\">slice<\/code> type is Slice\n  sliceInType := reflect.ValueOf(slice)\n  if sliceInType.Kind() != reflect.Slice {\n    panic(\"transform: not slice\")\n  }\n\n  \/\/check the function signature\n  fn := reflect.ValueOf(function)\n  elemType := sliceInType.Type().Elem()\n  if !verifyFuncSignature(fn, elemType, nil) {\n    panic(\"trasform: function must be of type func(\" + sliceInType.Type().Elem().String() + \") outputElemType\")\n  }\n\n  sliceOutType := sliceInType\n  if !inPlace {\n    sliceOutType = reflect.MakeSlice(reflect.SliceOf(fn.Type().Out(0)), sliceInType.Len(), sliceInType.Len())\n  }\n  for i := 0; i &lt; sliceInType.Len(); i++ {\n    sliceOutType.Index(i).Set(fn.Call([]reflect.Value{sliceInType.Index(i)})[0])\n  }\n  return sliceOutType.Interface()\n\n}\n\nfunc verifyFuncSignature(fn reflect.Value, types ...reflect.Type) bool {\n\n  \/\/Check it is a funciton\n  if fn.Kind() != reflect.Func {\n    return false\n  }\n  \/\/ NumIn() - returns a function type's input parameter count.\n  \/\/ NumOut() - returns a function type's output parameter count.\n  if (fn.Type().NumIn() != len(types)-1) || (fn.Type().NumOut() != 1) {\n    return false\n  }\n  \/\/ In() - returns the type of a function type's i'th input parameter.\n  for i := 0; i &lt; len(types)-1; i++ {\n    if fn.Type().In(i) != types[i] {\n      return false\n    }\n  }\n  \/\/ Out() - returns the type of a function type's i'th output parameter.\n  outType := types[len(types)-1]\n  if outType != nil &amp;&amp; fn.Type().Out(0) != outType {\n    return false\n  }\n  return true\n}\n<\/pre>\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e00\u4e0b\u5b50\u5c31\u590d\u6742\u8d77\u6765\u4e86\uff0c\u53ef\u89c1\uff0c\u590d\u6742\u7684\u4ee3\u7801\u90fd\u662f\u5728\u5904\u7406\u5f02\u5e38\u7684\u5730\u65b9\u3002\u6211\u4e0d\u6253\u7b97Walk through \u6240\u6709\u7684\u4ee3\u7801\uff0c\u522b\u770b\u4ee3\u7801\u591a\uff0c\u4f46\u662f\u8fd8\u662f\u53ef\u4ee5\u8bfb\u61c2\u7684\uff0c\u4e0b\u9762\u5217\u51e0\u4e2a\u4ee3\u7801\u4e2d\u7684\u8981\u70b9\uff1a<\/p>\n<ul>\n<li>\u4ee3\u7801\u4e2d\u6ca1\u6709\u4f7f\u7528Map\u51fd\u6570\uff0c\u56e0\u4e3a\u548c\u6570\u636e\u7ed3\u6784\u548c\u5173\u952e\u6709\u542b\u4e49\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u4f7f\u7528<code>Transform<\/code>\uff0c\u8fd9\u4e2a\u6765\u6e90\u4e8e C++ STL\u5e93\u4e2d\u7684\u547d\u540d\u3002<\/li>\n<li>\u6709\u4e24\u4e2a\u7248\u672c\u7684\u51fd\u6570\uff0c\u4e00\u4e2a\u662f\u8fd4\u56de\u4e00\u4e2a\u5168\u65b0\u7684\u6570\u7ec4 &#8211; <code>Transform()<\/code>\uff0c\u4e00\u4e2a\u662f\u201c\u5c31\u5730\u5b8c\u6210\u201d &#8211; <code>TransformInPlace()<\/code><\/li>\n<li>\u5728\u4e3b\u51fd\u6570\u4e2d\uff0c\u7528 <code>Kind()<\/code> \u65b9\u6cd5\u68c0\u67e5\u4e86\u6570\u636e\u7c7b\u578b\u662f\u4e0d\u662f Slice\uff0c\u51fd\u6570\u7c7b\u578b\u662f\u4e0d\u662fFunc<\/li>\n<li>\u68c0\u67e5\u51fd\u6570\u7684\u53c2\u6570\u548c\u8fd4\u56de\u7c7b\u578b\u662f\u901a\u8fc7 <code>verifyFuncSignature()<\/code> \u6765\u5b8c\u6210\u7684\uff0c\u5176\u4e2d\uff1a\n<ul>\n<li><code>NumIn()<\/code> &#8211; \u7528\u6765\u68c0\u67e5\u51fd\u6570\u7684\u201c\u5165\u53c2\u201d<\/li>\n<li>\u00a0<code>NumOut()<\/code> \u7528\u6765\u68c0\u67e5\u51fd\u6570\u7684\u201c\u8fd4\u56de\u503c\u201d<\/li>\n<\/ul>\n<\/li>\n<li>\u5982\u679c\u9700\u8981\u65b0\u751f\u6210\u4e00\u4e2aSlice\uff0c\u4f1a\u4f7f\u7528 <code>reflect.MakeSlice()<\/code> \u6765\u5b8c\u6210\u3002<\/li>\n<\/ul>\n<p>\u597d\u4e86\uff0c\u6709\u4e86\u4e0a\u9762\u7684\u8fd9\u6bb5\u4ee3\u7801\uff0c\u6211\u4eec\u7684\u4ee3\u7801\u5c31\u5f88\u53ef\u4ee5\u5f88\u5f00\u5fc3\u7684\u4f7f\u7528\u4e86\uff1a<\/p>\n<p>\u53ef\u4ee5\u7528\u4e8e\u5b57\u7b26\u4e32\u6570\u7ec4<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">list := []string{\"1\", \"2\", \"3\", \"4\", \"5\", \"6\"}\nresult := Transform(list, func(a string) string{\n    return a +a +a\n})\n\/\/{\"111\",\"222\",\"333\",\"444\",\"555\",\"666\"}\n<\/pre>\n<p>\u53ef\u4ee5\u7528\u4e8e\u6574\u5f62\u6570\u7ec4<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">list := []int{1, 2, 3, 4, 5, 6, 7, 8, 9}\nTransformInPlace(list, func (a int) int {\n  return a*3\n})\n\/\/{3, 6, 9, 12, 15, 18, 21, 24, 27}\n<\/pre>\n<p>\u53ef\u4ee5\u7528\u4e8e\u7ed3\u6784\u4f53<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">var list = []Employee{\n    {\"Hao\", 44, 0, 8000},\n    {\"Bob\", 34, 10, 5000},\n    {\"Alice\", 23, 5, 9000},\n    {\"Jack\", 26, 0, 4000},\n    {\"Tom\", 48, 9, 7500},\n}\n\nresult := TransformInPlace(list, func(e Employee) Employee {\n    e.Salary += 1000\n    e.Age += 1\n    return e\n})<\/pre>\n<h5><span class=\"ez-toc-section\" id=\"%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84_Generic_Reduce\"><\/span>\u5065\u58ee\u7248\u7684 Generic Reduce<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u540c\u6837\uff0c\u6cdb\u578b\u7248\u7684 Reduce \u4ee3\u7801\u5982\u4e0b\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"golang\">func Reduce(slice, pairFunc, zero interface{}) interface{} {\n  sliceInType := reflect.ValueOf(slice)\n  if sliceInType.Kind() != reflect.Slice {\n    panic(\"reduce: wrong type, not slice\")\n  }\n\n  len := sliceInType.Len()\n  if len == 0 {\n    return zero\n  } else if len == 1 {\n    return sliceInType.Index(0)\n  }\n\n  elemType := sliceInType.Type().Elem()\n  fn := reflect.ValueOf(pairFunc)\n  if !verifyFuncSignature(fn, elemType, elemType, elemType) {\n    t := elemType.String()\n    panic(\"reduce: function must be of type func(\" + t + \", \" + t + \") \" + t)\n  }\n\n  var ins [2]reflect.Value\n  ins[0] = sliceInType.Index(0)\n  ins[1] = sliceInType.Index(1)\n  out := fn.Call(ins[:])[0]\n\n  for i := 2; i &lt; len; i++ {\n    ins[0] = out\n    ins[1] = sliceInType.Index(i)\n    out = fn.Call(ins[:])[0]\n  }\n  return out.Interface()\n}<\/pre>\n<h5><span class=\"ez-toc-section\" id=\"%E5%81%A5%E5%A3%AE%E7%89%88%E7%9A%84_Generic_Filter\"><\/span>\u5065\u58ee\u7248\u7684 Generic Filter<span class=\"ez-toc-section-end\"><\/span><\/h5>\n<p>\u540c\u6837\uff0c\u6cdb\u578b\u7248\u7684 Filter \u4ee3\u7801\u5982\u4e0b\uff08\u540c\u6837\u5206\u662f\u5426\u201c\u5c31\u5730\u8ba1\u7b97\u201d\u7684\u4e24\u4e2a\u7248\u672c\uff09\uff1a<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">func Filter(slice, function interface{}) interface{} {\n  result, _ := filter(slice, function, false)\n  return result\n}\n\nfunc FilterInPlace(slicePtr, function interface{}) {\n  in := reflect.ValueOf(slicePtr)\n  if in.Kind() != reflect.Ptr {\n    panic(\"FilterInPlace: wrong type, \" +\n      \"not a pointer to slice\")\n  }\n  _, n := filter(in.Elem().Interface(), function, true)\n  in.Elem().SetLen(n)\n}\n\nvar boolType = reflect.ValueOf(true).Type()\n\nfunc filter(slice, function interface{}, inPlace bool) (interface{}, int) {\n\n  sliceInType := reflect.ValueOf(slice)\n  if sliceInType.Kind() != reflect.Slice {\n    panic(\"filter: wrong type, not a slice\")\n  }\n\n  fn := reflect.ValueOf(function)\n  elemType := sliceInType.Type().Elem()\n  if !verifyFuncSignature(fn, elemType, boolType) {\n    panic(\"filter: function must be of type func(\" + elemType.String() + \") bool\")\n  }\n\n  var which []int\n  for i := 0; i &lt; sliceInType.Len(); i++ {\n    if fn.Call([]reflect.Value{sliceInType.Index(i)})[0].Bool() {\n      which = append(which, i)\n    }\n  }\n\n  out := sliceInType\n\n  if !inPlace {\n    out = reflect.MakeSlice(sliceInType.Type(), len(which), len(which))\n  }\n  for i := range which {\n    out.Index(i).Set(sliceInType.Index(which[i]))\n  }\n\n  return out.Interface(), len(which)\n}<\/pre>\n<h4><span class=\"ez-toc-section\" id=\"%E5%90%8E%E8%AE%B0\"><\/span>\u540e\u8bb0<span class=\"ez-toc-section-end\"><\/span><\/h4>\n<p>\u8fd8\u6709\u51e0\u4e2a\u672a\u5c3d\u4e8b\u5b9c\uff1a<\/p>\n<p>1\uff09\u4f7f\u7528\u53cd\u5c04\u6765\u505a\u8fd9\u4e9b\u4e1c\u897f\uff0c\u4f1a\u6709\u4e00\u4e2a\u95ee\u9898\uff0c<strong>\u90a3\u5c31\u662f\u4ee3\u7801\u7684\u6027\u80fd\u4f1a\u5f88\u5dee\u3002\u6240\u4ee5\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u80fd\u7528\u4e8e\u4f60\u9700\u8981\u9ad8\u6027\u80fd\u7684\u5730\u65b9<\/strong>\u3002\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4f1a\u5728\u672c\u7cfb\u5217\u6587\u7ae0\u7684\u4e0b\u4e00\u7bc7\u6587\u7ae0\u4e2d\u8ba8\u8bba\u3002<\/p>\n<p>2\uff09\u4e0a\u9762\u7684\u4ee3\u7801\u5927\u91cf\u7684\u53c2\u8003\u4e86 Rob Pike\u7684\u7248\u672c\uff0c\u4ed6\u7684\u4ee3\u7801\u5728 <a href=\"https:\/\/github.com\/robpike\/filter\" target=\"_blank\" rel=\"noopener\">https:\/\/github.com\/robpike\/filter<\/a><\/p>\n<p>3\uff09\u5176\u5b9e\uff0c\u5728\u5168\u4e16\u754c\u8303\u56f4\u5185\uff0c\u6709\u5927\u91cf\u7684\u7a0b\u5e8f\u5458\u90fd\u5728\u95eeGo\u8bed\u8a00\u5b98\u65b9\u4ec0\u4e48\u65f6\u5019\u5728\u6807\u51c6\u5e93\u4e2d\u652f\u6301 Map\/Reduce\uff0cRob Pike\u8bf4\uff0c\u8fd9\u79cd\u4e1c\u897f\u96be\u5199\u5417\uff1f\u8fd8\u8981\u6211\u4eec\u5b98\u65b9\u6765\u5e2e\u4f60\u4eec\u5199\u4e48\uff1f\u8fd9\u79cd\u4ee3\u7801\u6211\u591a\u5c11\u5e74\u524d\u5c31\u5199\u8fc7\u4e86\uff0c\u4f46\u662f\uff0c\u6211\u4ece\u6765\u4e00\u6b21\u90fd\u6ca1\u6709\u7528\u8fc7\uff0c\u6211\u8fd8\u662f\u559c\u6b22\u7528\u201cFor\u5faa\u73af\u201d\uff0c\u6211\u89c9\u5f97\u4f60\u6700\u597d\u4e5f\u8ddf\u6211\u4e00\u8d77\u7528 \u201cFor\u5faa\u73af\u201d\u3002<\/p>\n<p>\u6211\u4e2a\u4eba\u89c9\u5f97\uff0cMap\/Reduce\u5728\u6570\u636e\u5904\u7406\u7684\u65f6\u5019\u8fd8\u662f\u5f88\u6709\u7528\u7684\uff0cRob Pike\u53ef\u80fd\u5e73\u65f6\u4e5f\u4e0d\u600e\u4e48\u5199\u201c\u4e1a\u52a1\u903b\u8f91\u201d\u7684\u4ee3\u7801\uff0c\u6240\u4ee5\uff0c\u5bf9\u4ed6\u6765\u8bf4\u53ef\u80fd\u4e5f\u4e0d\u592a\u4e86\u89e3\u4e1a\u52a1\u7684\u53d8\u5316\u6709\u591a\u4e48\u7684\u9891\u7e41\u2026\u2026<\/p>\n<p>\u5f53\u7136\uff0c\u597d\u8fd8\u662f\u4e0d\u597d\uff0c\u7531\u4f60\u6765\u5224\u65ad\uff0c\u4f46\u591a\u5b66\u4e00\u4e9b\u7f16\u7a0b\u6a21\u5f0f\u662f\u5bf9\u81ea\u5df1\u7684\u5e2e\u52a9\u4e5f\u662f\u5f88\u6709\u5e2e\u52a9\u7684\u3002<\/p>\n<p>\uff08\u5168\u6587\u5b8c\uff09<\/p>\n","raw":"","protected":false},"excerpt":{"rendered":"<p>\u5728\u672c\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u5b66\u4e60\u4e00\u4e0b\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u4e2d\u975e\u5e38\u91cd\u8981\u7684Map\u3001Reduce\u3001Filter\u7684\u4e09\u79cd\u64cd\u4f5c\uff0c\u8fd9\u4e09\u79cd\u64cd\u4f5c\u53ef\u4ee5\u8ba9\u6211\u4eec\u975e\u5e38\u65b9\u4fbf\u7075\u6d3b\u5730\u8fdb\u884c\u4e00\u4e9b\u6570\u636e\u5904\u7406\u2014\u2014\u6211\u4eec\u7684\u7a0b\u5e8f&#8230;<\/p>\n<p class=\"read-more\"><a class=\"btn btn-default\" href=\"https:\/\/coolshell.cn\/articles\/21164.html\"> Read More<span class=\"screen-reader-text\">  Read More<\/span><\/a><\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[819,23,3],"tags":[696,835,238,237,437,697,839],"series":[866],"aioseo_notices":[],"views":44590,"post_thumbnail_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","content_first_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_medium_image_300":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_thumbnail_image_624":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_frist_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_medium_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_large_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_full_image":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce.png","post_all_images":[{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/go.map_.reduce-300x192.png","id":"image0"},{"imagesurl":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/12\/map-reduce.png","id":"image1"}],"videoAdId":"","listAd":"0","listAdId":"","listAdEvery":5,"total_comments":19,"category_name":"Go \u8bed\u8a00","post_date":"2020-12-24","like_count":"0","praiseWord":"\u9f13\u52b1","excitationAd":"0","rewardedVideoAdId":"","detailAdId":"","detailAd":"0","enterpriseMinapp":"0","audios":[],"postImageUrl":"http:\/\/coolshell.cn\/wp-content\/uploads\/2016\/09\/coolshell-360x200.jpg","avatarurls":[],"related_posts":[],"pageviews":44591,"pageviews_wl":22914,"ratings_average":3,"ratings_total":91,"ratings_users":24,"next_post_id":21179,"next_post_title":"Go \u7f16\u7a0b\u6a21\u5f0f\uff1aGo Generation","previous_post_id":21146,"previous_post_title":"Go \u7f16\u7a0b\u6a21\u5f0f\uff1aFunctional Options"}