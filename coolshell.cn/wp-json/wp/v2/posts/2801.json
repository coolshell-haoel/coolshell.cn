{"id":2801,"date":"2010-08-10T08:24:52","date_gmt":"2010-08-10T00:24:52","guid":{"rendered":"http:\/\/coolshell.cn\/?p=2801"},"modified":"2010-08-08T19:19:38","modified_gmt":"2010-08-08T11:19:38","slug":"c%e6%8a%80%e5%b7%a7%ef%bc%9a%e7%bb%93%e6%9e%84%e4%bd%93%e5%8f%82%e6%95%b0%e8%bd%ac%e6%88%90%e4%b8%8d%e5%ae%9a%e5%8f%82%e6%95%b0","status":"publish","type":"post","link":"https:\/\/coolshell.cn\/articles\/2801.html","title":{"rendered":"C\u6280\u5de7\uff1a\u7ed3\u6784\u4f53\u53c2\u6570\u8f6c\u6210\u4e0d\u5b9a\u53c2\u6570"},"content":{"rendered":"<p>\u4e0b\u9762\u8fd9\u6bb5\u7a0b\u5e8f\u662f\u4e00\u4e2aC\u8bed\u8a00\u7684\u5c0f\u6280\u5de7\uff0c\u5176\u5c55\u793a\u4e86\u5982\u4f55\u628a\u4e00\u4e2a\u53c2\u6570\u4e3a\u7ed3\u6784\u4f53\u7684\u51fd\u6570\u8f6c\u6210\u4e00\u4e2a\u53ef\u53d8\u53c2\u6570\u7684\u51fd\u6570\uff0c\u5176\u4e2d\u7528\u5230\u4e86\u5b8f\u548c\u5185\u5efa\u5b8f\u201c<code>__VA_ARGS__<\/code>\u201d\uff0c\u4e0b\u9762\u8fd9\u6bb5\u7a0b\u5e8f\u53ef\u4ee5\u5728GCC\u4e0b\u6b63\u5e38\u7f16\u8bd1\u901a\u8fc7\uff1a<\/p>\n<pre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\">#include &lt;stdio.h&gt;\r\n\r\n#define func(...) myfunc((struct mystru){__VA_ARGS__})\r\n\r\nstruct mystru { const char *name; int number; };\r\n\r\nvoid myfunc(struct mystru ms )\r\n{\r\n  printf(&quot;%s: %d\\n&quot;, ms.name ?: &quot;untitled&quot;, ms.number);\r\n}\r\n\r\nint main(int argc, char **argv)\r\n{\r\n  func(&quot;three&quot;, 3);\r\n  func(&quot;hello&quot;);\r\n  func(.name = &quot;zero&quot;);\r\n  func(.number = argc, .name = &quot;argc&quot;,);\r\n  func(.number = 42);\r\n  return 0;\r\n}\r\n<\/pre>\n<p>\u4ece\u4e0a\u9762\u8fd9\u6bb5\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u53eb myfunc\u7684\u51fd\u6570\uff0c\u88abfunc\u7684\u5b8f\u6539\u53d8\u4e86\uff0c\u672c\u6765myfunc\u9700\u8981\u7684\u662f\u4e00\u4e2a\u53ebmystru\u7684\u7ed3\u6784\uff0c\u7136\u800c\u901a\u8fc7\u5b8f\uff0c\u6211\u4eec\u628astruct mystru\u7684\u8fd9\u4e2a\u53c2\u6570\uff0c\u53d8\u6210\u4e86\u4e0d\u5b9a\u53c2\u6570\u5217\u8868\u7684\u4e00\u4e2a\u51fd\u6570\u3002\u4e0a\u9762\u8fd9\u6bb5\u7a0b\u5e8f\u8f93\u51fa\u5165\u4e0b\uff0c<\/p>\n<p><!--more--><\/p>\n<blockquote><p>three: 3<br \/>\nhello: 0<br \/>\nzero: 0<br \/>\nargc: 1<br \/>\nuntitled: 42<\/p><\/blockquote>\n<p>\u867d\u7136\uff0c\u8fd9\u6837\u7684\u7528\u6cd5\u5e76\u4e0d\u597d\uff0c\u4f46\u662f\u4f60\u53ef\u4ee5\u4ece\u53e6\u5916\u4e00\u4e2a\u65b9\u9762\u4e86\u89e3\u4e00\u4e0b\u8fd9\u4e16\u4e0a\u5bf9C\u7a00\u5947\u53e4\u602a\u7684\u7528\u6cd5\u3002 \u5982\u679c\u4f60\u628a\u5b8f\u5c55\u5f00\u540e\uff0c\u4f60\u5c31\u660e\u7684\u4e3a\u4ec0\u4e48\u4e86\u3002\u4e0b\u9762\u662f\u5b8f\u5c55\u5f00\u7684\u6837\u5b50\uff1a<\/p>\n<pre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\">\r\n  myfunc((struct mystru){&quot;three&quot;, 3});\r\n  myfunc((struct mystru){&quot;hello&quot;});\r\n  myfunc((struct mystru){.name = &quot;zero&quot;});\r\n  myfunc((struct mystru){.number = argc, .name = &quot;argc&quot;,});\r\n  myfunc((struct mystru){.number = 42});\r\n<\/pre>\n","raw":"","protected":false},"excerpt":{"rendered":"<p>\u4e0b\u9762\u8fd9\u6bb5\u7a0b\u5e8f\u662f\u4e00\u4e2aC\u8bed\u8a00\u7684\u5c0f\u6280\u5de7\uff0c\u5176\u5c55\u793a\u4e86\u5982\u4f55\u628a\u4e00\u4e2a\u53c2\u6570\u4e3a\u7ed3\u6784\u4f53\u7684\u51fd\u6570\u8f6c\u6210\u4e00\u4e2a\u53ef\u53d8\u53c2\u6570\u7684\u51fd\u6570\uff0c\u5176\u4e2d\u7528\u5230\u4e86\u5b8f\u548c\u5185\u5efa\u5b8f\u201c__VA_ARGS__\u201d\uff0c\u4e0b\u9762\u8fd9\u6bb5\u7a0b\u5e8f\u53ef\u4ee5\u5728&#8230;<\/p>\n<p class=\"read-more\"><a class=\"btn btn-default\" href=\"https:\/\/coolshell.cn\/articles\/2801.html\"> Read More<span class=\"screen-reader-text\">  Read More<\/span><\/a><\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[5,3],"tags":[59],"series":[],"aioseo_notices":[],"views":14742,"post_thumbnail_image":"","content_first_image":"","post_medium_image_300":"","post_thumbnail_image_624":"","post_frist_image":"","post_medium_image":"","post_large_image":"","post_full_image":"","post_all_images":[],"videoAdId":"","listAd":"0","listAdId":"","listAdEvery":5,"total_comments":18,"category_name":"C\/C++\u8bed\u8a00","post_date":"2010-08-10","like_count":"0","praiseWord":"\u9f13\u52b1","excitationAd":"0","rewardedVideoAdId":"","detailAdId":"","detailAd":"0","enterpriseMinapp":"0","audios":[],"postImageUrl":"http:\/\/coolshell.cn\/wp-content\/uploads\/2016\/09\/coolshell-360x200.jpg","avatarurls":[],"related_posts":[],"pageviews":14743,"pageviews_wl":5888,"ratings_average":3,"ratings_total":36,"ratings_users":12,"next_post_id":2967,"next_post_title":"\u4ee3\u7801\u4f18\u5316\u6982\u8981","previous_post_id":2775,"previous_post_title":"\u514d\u8d39\u7535\u5b50\u4e66\u5217\u8868"}